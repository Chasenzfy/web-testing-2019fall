!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fidgets",[],t):"object"==typeof exports?exports.Fidgets=t():e.Fidgets=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=517)}({1:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return l}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return f}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return h}),n.d(t,"__read",function(){return d}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return y}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return g}),n.d(t,"__asyncValues",function(){return E}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return S});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}l((r=r.apply(e,t||[])).next())})}function f(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{!function(e){e.value instanceof y?Promise.resolve(e.value.v).then(l,u):c(o[0][2],e)}(i[e](t))}catch(e){c(o[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},111:function(e,t,n){(function(e){!function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},r=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},i=function(e){return decodeURIComponent(e).replace(/\+/g," ")};"URLSearchParams"in e&&"a=1"===new URLSearchParams("?a=1").toString()||function(){var o=function(e){if(Object.defineProperty(this,"_entries",{writable:!0,value:{}}),"string"==typeof e)""!==e&&this._fromString(e);else if(e instanceof o){var t=this;e.forEach(function(e,n){t.append(n,e)})}},a=o.prototype;a.append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},a.delete=function(e){delete this._entries[e]},a.get=function(e){return e in this._entries?this._entries[e][0]:null},a.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},a.has=function(e){return e in this._entries},a.set=function(e,t){this._entries[e]=[t.toString()]},a.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var i=0;i<n.length;i++)e.call(t,n[i],r,this)}},a.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),n(e)},a.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},a.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),n(e)},t&&(a[Symbol.iterator]=a.entries),a.toString=function(){var e=[];return this.forEach(function(t,n){e.push(r(n)+"="+r(t))}),e.join("&")},Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){this._entries={};for(var t,n=(e=e.replace(/^\?/,"")).split("&"),r=0;r<n.length;r++)t=n[r].split("="),this.append(i(t[0]),t.length>1?i(t[1]):"")}}),e.URLSearchParams=o}(),"function"!=typeof URLSearchParams.prototype.sort&&(URLSearchParams.prototype.sort=function(){var e=this,t=[];this.forEach(function(n,r){t.push([r,n]),e._entries||e.delete(r)}),t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t));var r,i=document;if(n&&(void 0===e.location||n!==e.location.href)){(r=(i=document.implementation.createHTMLDocument("")).createElement("base")).href=n,i.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var o=i.createElement("a");if(o.href=t,r&&(i.body.appendChild(o),o.href=o.href),":"===o.protocol||!/:/.test(o.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var a=new URLSearchParams(this.search),s=!0,l=!0,u=this;["append","delete","set"].forEach(function(e){var t=a[e];a[e]=function(){t.apply(a,arguments),s&&(l=!1,u.search=a.toString(),l=!0)}}),Object.defineProperty(this,"searchParams",{value:a,enumerable:!0});var c=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==c&&(c=this.search,l&&(s=!1,this.searchParams._fromString(this.search),s=!0))}})},r=n.prototype;["hash","host","hostname","port","protocol"].forEach(function(e){!function(e){Object.defineProperty(r,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval(function(){e.location.origin=t()},100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(34))},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={en:["en-US","en-CA"],fr:["fr-CA"]},i=new RegExp(/^[a-z]{2}$/gm),o=new RegExp(/^[a-z]{2}\-\w+$/gm);function a(e){if(!e||!e.match(o))return null;var t=Object.keys(r),n=e.substring(0,2);return t.indexOf(n)<0?null:n}t.convertToIETFTag=function(e){if(e.match(i))return r[e]&&r[e][0]?r[e][0]:null;if(e.match(o)){if([].concat.apply([],Object.keys(r).map(function(e){return r[e]})).indexOf(e)<0){var t=a(e);return t&&r[t]&&r[t][0]?r[t][0]:null}return e}return null},t.convertToISO639=a},34:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},517:function(e,t,n){e.exports=n(518)},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);n(111),r.__exportStar(n(519),t)},519:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(82),o=n(62),a=n(57),s=n(117),l=function(){return null},u={onEngagement:l,onItemClick:l,onItemView:l,onOpen:l},c={onListAdd:l,onListRemove:l},f={auto_flyer:"autoFlyer",flyer_item_id:"flyerItemId",flyer_run_id:"flyerRunId",flyer_type_name:"flyerTypeName",hide:"hide",jump_category:"jumpCategory",locale:"locale",pop_item:"popItem",postal_code:"postalCode",preview_code:"previewCode",sku:"sku",sort_by:"sortBy",store_code:"storeCode"},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.iframeContainer=null,n.iframeElement=null,n.headerElement=null,n.scrollUpdatePending=!1,n.pendingScroll=null,n.pendingScrollTimeout=0,n.pendingScrollThreshold=1e3,n.defaultOptions={analyticsDelegate:u,baseUrl:"https://weeklyads.walmart.com/hosted2/walmart/latest",locale:"en-US",shoppingListDelegate:c,storeCode:"2648"},n.frameOptions={postalCode:"",storeCode:""},n.resizeTimer=0,n.lastWindowSize={},n.routerVersion=2,n.healthCheck=0,n.pulseIntervalInitial=150,n.pulseIntervalCurrent=n.pulseIntervalInitial,n.pulseReceived=!1,n.currentHash="",n.handleResize=function(){if(!n.resizeTimer){n.iframeElement.contentWindow.postMessage({type:a.default.HOST_RESIZE},"*"),n.resizeTimer=window.setTimeout(function(){n.resizeTimer=0,n.iframeElement.contentWindow.postMessage({type:a.default.HOST_RESIZE},"*")},100)}},n.onMessage=function(e){if(n.iframeElement&&n.iframeElement.contentWindow&&e.source===n.iframeElement.contentWindow){var t={},r="string"==typeof e.data?JSON.parse(e.data):e.data;r.type===a.default.RESIZE_REQUEST&&(t.height=r.contentHeight,t.width=r.contentWidth),r.type===a.default.HOST_HISTORY_PUSH&&n.navigateToPath(r.path,void 0,!1),r.type===a.default.HOST_HISTORY_REPLACE&&n.navigateToPath(r.path,void 0,!0),r.type===a.default.HOST_HISTORY_BACK&&n.onBack(),r.type===a.default.SCROLL_REQUEST&&(t.defer=r.data.defer,t.x=r.data.x,t.y=r.data.y),r.type===a.default.SET_VIEWPORT_REQUEST&&(t.height=r.contentHeight,t.x=r.x,t.y=r.y,t.messageId=r.messageId),r.type===a.default.ANALYTICS_CLICK&&n.frameOptions.analyticsDelegate&&n.frameOptions.analyticsDelegate.onItemClick&&n.frameOptions.analyticsDelegate.onItemClick(r.data),r.type===a.default.ANALYTICS_VIEW&&n.frameOptions.analyticsDelegate&&n.frameOptions.analyticsDelegate.onItemView&&n.frameOptions.analyticsDelegate.onItemView(r.data),r.type===a.default.ANALYTICS_OPEN&&n.frameOptions.analyticsDelegate&&n.frameOptions.analyticsDelegate.onOpen&&n.frameOptions.analyticsDelegate.onOpen(r.data),r.type===a.default.ANALYTICS_UEV&&n.frameOptions.analyticsDelegate&&n.frameOptions.analyticsDelegate.onEngagement&&n.frameOptions.analyticsDelegate.onEngagement(r.data),r.type===a.default.SHOPPING_LIST_ADD&&n.frameOptions.shoppingListDelegate&&n.frameOptions.shoppingListDelegate.onListAdd&&n.frameOptions.shoppingListDelegate.onListAdd(r.item),r.type===a.default.SHOPPING_LIST_REMOVE&&n.frameOptions.shoppingListDelegate&&n.frameOptions.shoppingListDelegate.onListRemove&&n.frameOptions.shoppingListDelegate.onListRemove(r.item),r.type===a.default.IFRAME_PULSE&&(n.pulseReceived=!0,0!==n.healthCheck&&window.clearTimeout(n.healthCheck));var i=new CustomEvent(r.type,{detail:t});n.dispatchEvent(i)}},n.onScroll=function(e){n.scrollUpdatePending||(window.requestAnimationFrame(function(){n.postWindowSize(),n.scrollUpdatePending=!1}),n.scrollUpdatePending=!0)},n.onRequestResize=function(e){o.default(e)&&n.iframeElement&&e&&e.detail&&e.detail.height&&(n.iframeElement.style.height=e.detail.height+"px",n.pendingScroll&&Date.now()<=n.pendingScrollTimeout&&window.scrollTo(n.pendingScroll.x,n.pendingScroll.y),n.postWindowSize())},n.onRequestScroll=function(e){if(o.default(e)&&n.iframeElement){var t=n.iframeElement.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=e.detail.y+t.top+r,a=e.detail.x+n.iframeElement.offsetLeft;if(!0===e.detail.defer)n.pendingScroll={x:a,y:i},n.pendingScrollTimeout=Date.now()+n.pendingScrollThreshold;else{window.scrollTo(a,i);var s=n.getInsetTopHeight();window.scrollTo(a,i-s)}}},n.onSetView=function(e){if(o.default(e)&&n.iframeElement){var t=n.iframeElement.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,i=e.detail.y+t.top+r,a=e.detail.x+n.iframeElement.offsetLeft,s=e.detail.height,l=e.detail.messageId;n.iframeElement.style.height=s+"px",window.scrollTo(a,i);var u=n.getInsetTopHeight();window.scrollTo(a,i-u),n.postWindowSize(),l&&n.iframeElement.contentWindow.postMessage({messageId:l,status:"processed"},"*")}},n.onBack=function(){window.history.back()},n.onPopState=function(e){var t=e.state,r=t.isFlipp,i=t.flippPath;!0===r&&n.iframeElement&&(n.currentHash=i,n.iframeElement.contentWindow.postMessage({path:i,type:a.default.NAVIGATE_TO_PATH},"*"))},n.onLoad=function(){var e=n.getPath();n.navigateToPath(e.hash,void 0,!0)},n.frameOptions=Object.assign({},n.defaultOptions,e),"scrollRestoration"in history&&(history.scrollRestoration="manual"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"setHeaderElement",value:function(e){this.headerElement=e}},{key:"decorate",value:function(e){this.iframeContainer=e;var t=this.getPath();this.iframeElement=document.createElement("iframe"),this.iframeElement.classList.add("flippiframe"),this.iframeElement.allowFullscreen=!0,this.iframeElement.title="Flipp Publication",this.iframeElement.frameBorder="0",this.iframeElement.scrolling="no",this.iframeElement.width="100%",this.iframeElement.setAttribute("allowTransparency","true"),this.iframeElement.setAttribute("webkitallowfullscreen","true"),this.iframeElement.setAttribute("mozallowfullscreen","true"),this.pulseIntervalCurrent<=6*this.pulseIntervalInitial?(this.iframeElement.addEventListener("load",this.startHealthCheck.bind(this,this.pulseIntervalCurrent)),this.pulseIntervalCurrent=2*this.pulseIntervalCurrent):console.warn("Attempted to reload the iframe too many times"),this.iframeElement.addEventListener("load",this.onLoad),this.iframeElement.src=t.path,this.iframeContainer.appendChild(this.iframeElement),window.addEventListener("resize",this.handleResize),window.addEventListener("message",this.onMessage),window.addEventListener("scroll",this.onScroll),window.addEventListener("popstate",this.onPopState),this.addEventListener(a.default.RESIZE_REQUEST,this.onRequestResize),this.addEventListener(a.default.SCROLL_REQUEST,this.onRequestScroll),this.addEventListener(a.default.SET_VIEWPORT_REQUEST,this.onSetView)}},{key:"getPath",value:function(){var e=Object.assign({},this.defaultOptions,this.frameOptions,this.getParams()),t=new URL(e.baseUrl+"/lib/client.html"),n=new URL("https://flipp");if(e.locale){var r=s.convertToIETFTag(e.locale);r&&t.searchParams.set("locale",r)}return e.postalCode&&t.searchParams.set("postalCode",e.postalCode),e.storeCode&&t.searchParams.set("storeCode",e.storeCode),e.hide&&t.searchParams.set("hide",e.hide),e.previewCode&&t.searchParams.set("previewCode",e.previewCode),e.sortBy&&t.searchParams.set("sortBy",e.sortBy),e.postalCode&&!e.storeCode?n.pathname="stores":e.postalCode||e.storeCode?e.flyerItemId&&"true"===e.popItem?(n.pathname="product",n.searchParams.set("product-id",e.flyerItemId)):e.flyerRunId||e.flyerTypeName?(n.pathname="publication",e.flyerRunId&&n.searchParams.set("publication-run-id",e.flyerRunId),e.flyerTypeName&&n.searchParams.set("publication-type-name",e.flyerTypeName),e.jumpCategory&&n.searchParams.set("jump-category",e.jumpCategory),e.flyerItemId&&n.searchParams.set("scroll-flyer-item",e.flyerItemId)):n.pathname="publications":n.pathname="postalcodes",e.autoFlyer&&(n.pathname="publication",n.searchParams.set("auto-flyer",e.autoFlyer)),t.searchParams.set("r",Math.random().toString()),t.searchParams.set("routerVersion",this.routerVersion.toString()),{hash:"#!"+n.pathname+n.search,path:t.toString()}}},{key:"postWindowSize",value:function(){if(this.iframeElement&&this.iframeElement.contentWindow){var e=this.getInsetTopHeight(),t=this.iframeElement.getBoundingClientRect(),n={height:window.innerHeight,insetBottom:0,insetTop:e,scroll:!1,scrollX:-t.left,scrollY:-t.top,width:Math.min(window.innerWidth,t.width)};n.scroll=n.scrollX!==this.lastWindowSize.scrollX||n.scrollY!==this.lastWindowSize.scrollY;var r={data:n,type:a.default.VIEWPORT};JSON.stringify(n)!==JSON.stringify(this.lastWindowSize)&&this.iframeElement.contentWindow.postMessage(r,"*"),this.lastWindowSize=n}}},{key:"getInsetTopHeight",value:function(){if(!this.iframeElement)return 0;if(!this.headerElement){var e=window.innerWidth<480?94:44,t=this.iframeElement.getBoundingClientRect(),n=Math.min(e,t.top);return Math.min(e,e-n)}var r=this.headerElement.getBoundingClientRect().height,i=Math.min(r,this.iframeElement.getBoundingClientRect().top);return Math.min(r,r-i)}},{key:"getParams",value:function(){var e=new URL(window.location.href),t={};return Object.keys(f).filter(function(t){return e.searchParams.has(t)}).forEach(function(n){t[f[n]]=e.searchParams.get(n)}),t}},{key:"startHealthCheck",value:function(e){var t=this;this.iframeElement&&this.iframeElement.removeEventListener("load",this.startHealthCheck.bind(this,this.pulseIntervalCurrent)),this.pulseReceived||(this.healthCheck=window.setTimeout(function(){if(t.iframeContainer){for(;t.iframeContainer.firstChild;)t.iframeContainer.removeChild(t.iframeContainer.firstChild);t.iframeElement&&t.iframeElement.addEventListener("load",t.onLoad),window.removeEventListener("resize",t.handleResize),window.removeEventListener("message",t.onMessage),window.removeEventListener("scroll",t.onScroll),window.removeEventListener("popstate",t.onPopState),t.removeEventListener(a.default.RESIZE_REQUEST,t.onRequestResize),t.removeEventListener(a.default.SCROLL_REQUEST,t.onRequestScroll),t.removeEventListener(a.default.SET_VIEWPORT_REQUEST,t.onSetView),t.decorate(t.iframeContainer)}},e))}},{key:"navigateToPath",value:function(e,t,n){if(this.currentHash!==e){var r=Object.assign({isFlipp:!0},history.state,{flippPath:e});n?history.replaceState(r,t||"Weekly Ad"):history.pushState(r,t||"Weekly Ad"),this.currentHash=e}this.iframeElement.contentWindow.postMessage({path:e,type:a.default.NAVIGATE_TO_PATH},"*")}}]),t}();t.IframeHost=p},57:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ANALYTICS_CLICK="flipp-analytics-click",e.ANALYTICS_OPEN="flipp-analytics-open",e.ANALYTICS_UEV="flipp-analytics-engagement",e.ANALYTICS_VIEW="flipp-analytics-view",e.HOST_RESIZE="flipp-host-resize",e.HOST_HISTORY_REPLACE="flipp-history-replace",e.HOST_HISTORY_PUSH="flipp-history-push",e.HOST_HISTORY_BACK="flipp-history-back",e.NAVIGATE_TO_PATH="flipp-navigate-path",e.IFRAME_PULSE="flipp-iframe-pulse",e.RESIZE_REQUEST="flipp-resize-request",e.SCROLL_REQUEST="flipp-scroll-request",e.SET_VIEWPORT_REQUEST="flipp-set-viewport-request",e.SHOPPING_LIST_ADD="flipp-shopping_list-add",e.SHOPPING_LIST_REMOVE="flipp-shopping_list-remove",e.SHOPPING_LIST_UPDATE="flipp-shopping_list-update",e.VIEWPORT="sfml-viewport"}(r=t.IframeMessageTypes||(t.IframeMessageTypes={})),t.default=r},62:function(e,t,n){"use strict";function r(e){return"detail"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomEvent=r,t.default=r},82:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}return r(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,i=n.length;r<i;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type],n=0,r=t.length;n<r;n++)t[n].call(this,e);return!e.defaultPrevented}}]),e}();t.default=i}})});