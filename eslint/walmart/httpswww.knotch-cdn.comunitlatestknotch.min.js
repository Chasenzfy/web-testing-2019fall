!function(e){try{!function(){function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n||e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}return e}()({1:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("./vanillaHelpers")),a=t("./configMethods"),s=function(){var t={pageSelector:"body"},n={};switch(e.location.hostname){case"www.forbes.com":n={pageSelector:".article-body"};break;case"www.trinet.com":n={waitUntil:a.trinetWaitUntil};break;case"www.ally.com":n={pageSelector:"#page"}}return o.default.extend(t,n)},u=s;i.default=u},{"./configMethods":8,"./vanillaHelpers":11}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(e("./vanillaHelpers")),u=e("./Utils"),c=function(){function e(t){r(this,e),this.bugsnag=t}return a(e,[{key:"getLastParagraphNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=s.default.getNodeDescription(e);if((0,u.isNodeBlacklisted)(e))return this.bugsnag.pushBreadCrumb({name:"".concat(n," is blacklisted")}),null;var i=e.children;if(0===i.length)return this.bugsnag.pushBreadCrumb({name:"".concat(n," has no children")}),e;var r=i.length-t,o=i[r];if((0,u.isNodeContainer)(o)){var a=this.getLastParagraphNode(o);return a?a:t===i.length-1?(this.bugsnag.pushBreadCrumb({name:"iterated through all sub nodes for ".concat(n,", no valid child found")}),null):this.getLastParagraphNode(e,t+1)}for(var c=i.length-1,d=i.length-1;d>=0;d--){var l=i[d];(0,u.nodeContainsBlacklistedNode)(l)&&(c=d-1)}return c<0?(this.bugsnag.pushBreadCrumb({name:"all children nodes of ".concat(n," are blacklisted")}),null):i[c]}}]),e}(),d=c;n.default=d},{"./Utils":6,"./vanillaHelpers":11}],3:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("./PageDOMUtils.js")),c=r(t("./LastNodeFinder")),d=t("./constants"),l=r(t("./vanillaHelpers")),h=function(e,t){return t(!0)},f=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;o(this,t),this.node=e,this.url=l.default.getCanonicalURL(),this.urlMap=n,this.injected=!1,this.scrollTimeout=null,this.pageDOMUtils=new u.default(this.node,this.url,s),this.lastNodeFinder=new c.default(s),this.touchEndListener=function(){return i.onScroll()},this.scrollListener=function(){return i.onScroll()},this.keyDownListener=function(e){return i.onKeyDown(e)},this.pageValidate=r,this.bugsnag=s,this.inject=function(e,t){return a({pageNode:i.node,pageBodyNode:e,lastParagraphNode:t,urlMap:n,url:i.url,injectedCallback:function(){return i.injected=!0},unbindListeners:function(){return i.unbindListeners()},bugsnag:i.bugsnag})},this.init()}return s(t,[{key:"init",value:function(){l.default.isMobile()?document.addEventListener("touchend",this.touchEndListener):(document.addEventListener("scroll",this.scrollListener),document.addEventListener("keydown",this.keyDownListener)),this.checkVisibility()}},{key:"getYPos",value:function(){return e.pageYOffset+e.innerHeight}},{key:"onScroll",value:function(){var e=this;this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.injected?this.unbindListeners():this.scrollTimeout=setTimeout(function(){return e.checkVisibility()},100)}},{key:"onKeyDown",value:function(e){var t=(e.code||"").toLowerCase();"space"!==t&&"arrowdown"!==t||this.onScroll()}},{key:"checkVisibility",value:function(){var t=this;if(this.injected)return void this.unbindListeners();var n=this.node.getBoundingClientRect(),i=n.top+n.height>=d.INVIEW_OFFSET&&n.top<e.innerHeight/2;if(i){if(this.url=l.default.getCanonicalURL(),!this.url)return this.unbindListeners(),this.bugsnag.pushBreadCrumb({name:"Canonical URL not found",type:"node finder"});if(this.urlMap){var r=this.urlMap[this.url];if(!r||!r.length)return this.bugsnag.pushBreadCrumb({name:"No map found for this URL",metaData:{url:this.url}}),this.unbindListeners();this.pageValidate&&this.pageValidate(r[0],function(e){return e?void t.findPageBodyNode():(t.bugsnag.pushBreadCrumb({name:"Page validation failed",metaData:{url:t.url}}),t.unbindListeners())})}else this.findPageBodyNode()}}},{key:"findPageBodyNode",value:function(){var e=this.pageDOMUtils.checkForInfographic();if(e){var t=e.parentElement;this.inject(t,e)}else{var n=this.pageDOMUtils.getPageBodyNode();if(!n)return this.unbindListeners(),this.bugsnag.reportError(new Error("Page body node could not be found"),{data:{url:this.url}});var i=this.lastNodeFinder.getLastParagraphNode(n);this.inject(n,i)}}},{key:"unbindListeners",value:function(){document.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("touchend",this.touchEndListener)}}]),t}(),p=f;i.default=p},{"./LastNodeFinder":2,"./PageDOMUtils.js":4,"./constants":9,"./vanillaHelpers":11}],4:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("./Validators")),c=t("./Utils"),d=t("./constants"),l=function(){function t(e,n,i){o(this,t),this.pageNode=e,this.url=n,this.bugsnag=i}return s(t,[{key:"getPageBodyNode",value:function(){var e=this.getTopTextNodes();if(!e||0===e.length)return this.bugsnag.reportError(new Error("No text nodes found for this page"),{data:{url:this.url}});var t=e.map(function(e){return e.textContent});this.bugsnag.pushBreadCrumb({name:"Found text nodes",metaData:{nodes:t.length,url:this.url,method:"getPageBodyNode()"}});var n,i,r=[];for(e.length%2!==0?(n=e.slice(0,-1),i=e.slice(0,-1)):(n=e.slice(),i=e.slice()),n.sort(function(){return.5-Math.random()}),i.sort(function(){return.5-Math.random()});n.length;){var o=n.pop(),a=i[0]===o?i.pop():i.shift(),s=this.findFirstCommonAncestor(o,a);s&&r.push(s)}return r.length>0?(this.bugsnag.pushBreadCrumb({name:"Found parent nodes",metaData:{parentNodes:r.length,url:this.url,method:"getPageBodyNode()"}}),(0,c.mode)(r)):this.bugsnag.reportError(new Error("No parent nodes found for this page"),{data:{url:this.url}})}},{key:"getAncestors",value:function(e){return e!==document?[e].concat(this.getAncestors(e.parentNode)):[e]}},{key:"findFirstCommonAncestor",value:function(e,t,n){var i=n||this.getAncestors(t);return 0===i.length?null:i.indexOf(e)>-1?e:e===document?null:this.findFirstCommonAncestor(e.parentNode,t,i)}},{key:"getTopTextNodes",value:function(){var e=(0,c.textNodesUnder)(this.pageNode);if(e.length){var t=(0,u.default)(e);return u.default.length?(this.bugsnag.pushBreadCrumb({name:"Found valid nodes",metaData:{validNodes:t.length,url:this.url,method:"getTopTextNode()"}}),t.sort(function(e,t){return t.length-e.length}).slice(0,d.NODE_SAMPLE_SIZE)):this.bugsnag.reportError(new Error("No text nodes passed validation"),{data:{url:this.url}})}return this.bugsnag.reportError(new Error("No text nodes found for this page"),{data:{url:this.url}})}},{key:"checkForInfographic",value:function(){for(var t,n=0,i=document.querySelectorAll("img"),r=0;r<i.length;r++){var o=i[r];o.height>n&&(n=o.height,t=o)}if(t){var a=t.width,s=e.innerHeight,u=n/s,c=n/a;if(u>d.MIN_IMAGE_HEIGHT_RATIO&&c>d.MIN_IMAGE_HEIGHT_RATIO)return t}return this.bugsnag.pushBreadCrumb({name:"infographic not found"}),null}}]),t}(),h=l;i.default=h},{"./Utils":6,"./Validators":7,"./constants":9}],5:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(t){this.pages=[],this.pageNodes=[],this.urlMap=t.urlMap||e.localURLToUnitList,this.pageValidate=t.pageValidate,this.config=(0,a.default)(),this.bugsnag=t.bugsnag,this.inject=t.inject,this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("./Config")),s=r(t("./Page"));o.prototype={init:function(){var e=this;this.config&&this.config.waitUntil?this.config.waitUntil.call(this,function(){return e.checkForNewPages()}):this.checkForNewPages()},checkForNewPages:function(){var t=this;this.checkPageNodesInterval=setInterval(function(){return t.checkPageNodes()},2e3),e.setTimeout(function(){return clearInterval(t.checkPageNodesInterval)},18e5),this.checkPageNodes()},checkPageNodes:function(){for(var e=document.querySelectorAll(this.config.pageSelector),t=0;t<e.length;t++)this.pageNodes.indexOf(e[t])<0&&(this.pages.push(new s.default(e[t],this.urlMap,this.pageValidate,this.inject,this.bugsnag)),this.pageNodes.push(e[t]))}};var u=o;i.default=u},{"./Config":1,"./Page":3}],6:[function(e,t,n){"use strict";function i(e){return a(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeContainer=n.isNodeBlacklisted=n.nodeContainsBlacklistedNode=n.mode=n.constructNodeBlacklist=n.textNodesUnder=void 0;var s=e("./constants"),u=function(e){if(!e)return[];for(var t,n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)n.push(t);return n};n.textNodesUnder=u;var c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=e.map(function(e){var t,r=n.querySelectorAll(e),o=n.querySelectorAll("[class*=".concat(e,"]")),a=n.querySelectorAll("[id*=".concat(e,"]")),s=[].concat(i(Array.prototype.slice.call(r)),i(Array.prototype.slice.call(o)),i(Array.prototype.slice.call(a))),c=s.map(function(e){return u(e)});return(t=Array.prototype).concat.apply(t,i(c))});return(t=Array.prototype).concat.apply(t,i(r))};n.constructNodeBlacklist=c;var d=function(e){for(var t={},n=null,i=1,r=0;r<e.length;r++){var o=e[r].className;null==t[o]?(t[o]={},t[o].count=1,t[o].id=r):t[o].count+=1}for(var a in t)t[a].count>=i&&(n=t[a].id,i=t[a].count);return e[n]};n.mode=d;var l=function(e){for(var t=0;t<s.LAST_NODE_BLACKLIST_KEYWORDS.length;t++){var n=c(s.LAST_NODE_BLACKLIST_KEYWORDS,e);if(n.length>0||null===e.parentNode.offsetParent)return!0}};n.nodeContainsBlacklistedNode=l;var h=function(e){for(var t=0;t<e.classList.length;t++)if(s.LAST_NODE_BLACKLIST_KEYWORDS.indexOf(e.classList[t])!==-1)return!0};n.isNodeBlacklisted=h;var f=function(e){return e&&"DIV"===e.tagName&&e.children.length>0};n.isNodeContainer=f},{"./constants":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.validateNodes=void 0;var i=e("./Utils"),r=e("./constants"),o=function(e){var t=(0,i.constructNodeBlacklist)(r.NODE_BLACKLIST_KEYWORDS),n=[function(e){var t=e.parentNode;return t&&"SCRIPT"!==t.tagName&&"NOSCRIPT"!==t.tagName},function(e){var t=e.parentNode;return t&&"STYLE"!==t.tagName&&"STYLE"!==t.tagName},function(e){var t=/footer/i,n=e.id,i=e.className;return(!e.parentNode||!t.test(e.parentNode.tagName))&&(!t.test(n)&&!t.test(i))},function(e){var t=e.parentNode;return t&&null!==t.offsetParent},function(e){return e.textContent.trim().length>r.TEXT_LENGTH_THRESHOLD},function(e){return t.indexOf(e)===-1}];return e.filter(function(e){return n.reduce(function(t,n){return t&&n(e)},!0)})};n.validateNodes=o;var a=o;n.default=a},{"./Utils":6,"./constants":9}],8:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.trinetWaitUntil=void 0;var r=function(t){var n=e.setInterval(function(){try{if(e.$nuxt&&e.$nuxt.$loading._isMounted)return t(),clearInterval(n),!0}catch(e){console.log(e.message)}},100);e.setTimeout(function(){return clearInterval(n)},18e5)};i.trinetWaitUntil=r},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_IMAGE_HEIGHT_RATIO=n.INVIEW_OFFSET=n.NODE_SAMPLE_SIZE=n.TEXT_LENGTH_THRESHOLD=n.LAST_NODE_BLACKLIST_KEYWORDS=n.NODE_BLACKLIST_KEYWORDS=void 0;var i=["footer","comment","disclaimer","modal","nav","about","featured","sidebar"];n.NODE_BLACKLIST_KEYWORDS=i;var r=["tag-display","featured","related-content","tag-cloud","excerpt-cards-container","relatedcontent","related-content-carousel","related-content-title"];n.LAST_NODE_BLACKLIST_KEYWORDS=r;var o=200;n.TEXT_LENGTH_THRESHOLD=o;var a=50;n.NODE_SAMPLE_SIZE=a;var s=100;n.INVIEW_OFFSET=s;var u=2;n.MIN_IMAGE_HEIGHT_RATIO=u},{}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e("./Tracker"));t.exports=function(e){return new r.default(e)}},{"./Tracker":5}],11:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.h=void 0;var r={isMobile:function(){return"ontouchstart"in e||navigator.msMaxTouchPoints||navigator.userAgent.indexOf("IEMobile")!==-1},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isValidNumber:function(e){return"number"==typeof e&&!isNaN(e)},isValidTagId:function(e){var t=/^[A-F\d]{8}-[A-F\d]{4}-4[A-F\d]{3}-[89AB][A-F\d]{3}-[A-F\d]{12}$/i;return e&&"string"==typeof e&&e.length>0&&(t.test(e)||e.match(/^[0-9a-fA-F]{24}$/))},getAccountId:function(){return r.getScriptAttribute("data-account")},getNodeDescription:function(e){if(!e)return null;var t=e.tagName;return e.id&&(t+="#".concat(e.id)),e.className&&e.className.length&&(t+=e.className.split(" ").join(".")),t},getScriptFlag:function(e){try{var t=document.currentScript||document.querySelector('script[src*="knotch"]'),n=""===t.getAttribute(e),i="true"===t.getAttribute(e)||"1"===t.getAttribute(e);return n||i}catch(e){return!1}},getScriptAttribute:function(e){try{var t=document.currentScript||document.querySelector('script[src*="knotch"]');return t.getAttribute(e)}catch(e){return!1}},getCanonicalURL:function(){return document.querySelector("meta[property='og:url']")?document.querySelector("meta[property='og:url']").getAttribute("content"):document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").getAttribute("href"):document.querySelector("meta[name='canonical']")?document.querySelector("meta[name='canonical']").getAttribute("content"):null},getBrowserURL:function(t){var n=null;return document.URL?n=document.URL:e.location.href?n=e.location.href:e.location.host&&e.location.pathname&&(n="".concat(e.location.protocol,"//").concat(e.location.host).concat(e.location.pathname)),n?n:(t.reportError(new Error("browser URL doesn't exist"),this.localData),null)},get:function(t,n,i,r,o){var a,s="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onerror=function(){return a.status>=500&&o.reportError(new Error(a.responseText),{name:"".concat(a.status," request error"),data:n}),!1},a.onreadystatechange=function(){if(a.readyState===s)if(200===a.status){var e=a.responseText;if(e)try{var n=JSON.parse(e)}catch(n){o.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}i(n)}else a.status>=500?r(a.status,a.statusText,a.readyState,a.responseText,a.getAllResponseHeaders()):0===a.status&&r(a.status,a.statusText,a.readyState)},a.open("GET",t,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(n)),a},post:function(t,n,i,r,o){var a,s="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onloadend=function(){return a.status>=400&&o.reportError(new Error(a.responseText),{name:"404 - not found",data:n}),!1},a.onerror=function(){return a.status>=500&&o.reportError(new Error(a.responseText),{name:"".concat(a.status," request error"),data:n}),!1},a.onreadystatechange=function(){if(a.readyState===s){var e=a.responseText;if(e&&!e.match(/</))try{var n=JSON.parse(e)}catch(n){o.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}200===a.status?i(n):a.status>=400?r(a.status,a.statusText):0===a.stats&&r(a.status,a.statusText)}},a.open("POST",t,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(n)),a},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}};i.h=r;var o=r;i.default=o},{}],12:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){this.config=e||{},this.url="https://notify.bugsnag.com/js?",this.user={},this.device={},this.startTime=(new Date).getTime(),this.breadcrumbs=[{name:"Bugsnag Loaded",timestamp:this.startTime,type:"navigation"}]}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("./vanillaHelper")),s=30;o.prototype={setUser:function(e){this.user=e},setDevice:function(e){this.device=e},pushBreadCrumb:function(t){t.timestamp=(new Date).getTime(),t.type||(t.type="process"),this.breadcrumbs.push(t),this.breadcrumbs.length>s&&this.breadcrumbs.shift(),e.Knotch&&e.Knotch.debug&&a.default.log(t)},reportError:function(t,n){var i=e.Knotch&&e.Knotch.debug,r=this.config,o=r.env,s=r.version;if("development"===o||"test"===o||i||"development"===s)return void console.error(t);var u=a.default.serialize(this.payloadData(t,n)),c=new Image;c.src=this.url+u},payloadData:function(t,n){if(t)return n||(n={}),{apiKey:"581f50d456b1fa142bae175bdea5d2d8",breadcrumbs:this.breadcrumbs,context:e.location.href,ct:"img",cb:(new Date).getTime(),language:"en-US",message:t.message,metaData:n.data,name:n.name||t.message,notifierVersion:"3.0.7",payloadVersion:"3",releaseStage:this.config.env,severity:n.severity||"error",stacktrace:t.stack,url:e.location.href,user:this.user||n.user,userAgent:navigator.userAgent,appVersion:this.config.version||"dev"}}},self!==top&&(e.bugsnag=new o(e.knotchConfig));var u=o;i.default=u},{"./vanillaHelper":15}],13:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r={set:function(t,n,i,r){var o;return t?(r||(r={}),i&&(o=(new Date).getTime()+1e3*i),e.document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(String(n)),o?"; expires="+new Date(o).toUTCString():"","; path="+(r.path?r.path:"/"),r.domain?"; domain="+r.domain:"",e.location&&"https:"===e.location.protocol?"; secure":""].join("")):null},get:function(t,n){return(n=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(e.document.cookie))?decodeURIComponent(n[1]):null},delete:function(e,t){r.set(e,null,-1,t)}},o=r;i.default=o},{}],14:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(){var t,n,i,r,o,a,s,u,c,d,l,h,f,p;return c={},i=document,l=!1,h="active",s=6e4,a=!1,n=function(){var e,t,n,i,r,o,a;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},r=function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},o={},n="__ceGUID",t=function(e,t,i){return e[n]=void 0,e[n]||(e[n]="ifvisible.object.event.identifier"),o[e[n]]||(o[e[n]]={}),o[e[n]][t]||(o[e[n]][t]=[]),o[e[n]][t].push(i)},i=function(e,t,i){var r,a,s,u,c;if(e[n]&&o[e[n]]&&o[e[n]][t]){for(u=o[e[n]][t],c=[],a=0,s=u.length;a<s;a++)r=u[a],c.push(r(i||{}));return c}},a=function(e,t,i){var r,a,s,u,c;if(i){if(e[n]&&o[e[n]]&&o[e[n]][t])for(c=o[e[n]][t],a=s=0,u=c.length;s<u;a=++s)if(r=c[a],r===i)return o[e[n]][t].splice(a,1),r}else if(e[n]&&o[e[n]]&&o[e[n]][t])return delete o[e[n]][t]},{add:t,remove:a,fire:i}}(),t=function(){var e;return e=!1,function(t,n,i){return e||(e=t.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:t.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),e(t,n,i)}}(),r=function(e,t){var n;return i.createEventObject?e.fireEvent("on"+t,n):(n=i.createEvent("HTMLEvents"),n.initEvent(t,!0,!0),!e.dispatchEvent(n))},u=function(){var e,t,n,r,o;for(r=void 0,o=3,n=i.createElement("div"),e=n.getElementsByTagName("i"),t=function(){return n.innerHTML="<!--[if gt IE "+ ++o+"]><i></i><![endif]-->",e[0]};t(););return o>4?o:r}(),o=!1,p=void 0,"undefined"!=typeof i.hidden?(o="hidden",p="visibilitychange"):"undefined"!=typeof i.mozHidden?(o="mozHidden",p="mozvisibilitychange"):"undefined"!=typeof i.msHidden?(o="msHidden",p="msvisibilitychange"):"undefined"!=typeof i.webkitHidden&&(o="webkitHidden",p="webkitvisibilitychange"),f=function(){var n,r;return n=[],r=function(){return n.map(clearTimeout),"active"!==h&&c.wakeup(),a=+new Date,n.push(setTimeout(function(){if("active"===h)return c.idle()},s))},r(),t(i,"mousemove",r),t(i,"keyup",r),t(i,"touchstart",r),t(e,"scroll",r),c.focus(r),c.wakeup(r)},d=function(){var n;return!!l||(o===!1?(n="blur",u<9&&(n="focusout"),t(e,n,function(){return c.blur()}),t(e,"focus",function(){return c.focus()})):t(i,p,function(){return i[o]?c.blur():c.focus()},!1),l=!0,f())},c={setIdleDuration:function(e){return s=1e3*e},getIdleDuration:function(){return s},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===h?(t.isIdle=!0,t.idleFor=e-a,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-a,t.timeLeft=a+s-e,t.timeLeftPer=(100-100*t.timeLeft/s).toFixed(2)),t},focus:function(e){return"function"==typeof e?this.on("focus",e):(h="active",n.fire(this,"focus"),n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:h})),this},blur:function(e){return"function"==typeof e?this.on("blur",e):(h="hidden",n.fire(this,"blur"),n.fire(this,"idle"),n.fire(this,"statusChanged",{status:h})),this},idle:function(e){return"function"==typeof e?this.on("idle",e):(h="idle",n.fire(this,"idle"),n.fire(this,"statusChanged",{status:h})),this},wakeup:function(e){return"function"==typeof e?this.on("wakeup",e):(h="active",n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:h})),this},on:function(e,t){return d(),n.add(this,e,t),this},off:function(e,t){return d(),n.remove(this,e,t),this},onEvery:function(e,t){var n,i;return d(),n=!1,t&&(i=setInterval(function(){if("active"===h&&n===!1)return t()},1e3*e)),{stop:function(){return clearInterval(i)},pause:function(){return n=!0},resume:function(){return n=!1},code:i,callback:t}},now:function(e){return d(),h===(e||"active")}}}();i.default=r},{}],15:[function(t,n,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return u(e)||s(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,function(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r}),e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),"function"!=typeof e.CustomEvent&&(t.prototype=e.Event.prototype,e.CustomEvent=t)}();var c={getNodeDescription:function(e){if(!e)return null;var t=e.tagName;return e.id&&(t+="#".concat(e.id)),e.className&&e.className.length&&(t+=e.className.split(" ").join(".")),t},getQueryParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getBrowserURL(),t=e.split("?")[1],n=t?t.split("&"):[];return n.reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},getSentimentType:function(e){if("number"!=typeof e)return null;var t="";return e>10?t="positive":10===e?t="neutral":e<10&&(t="negative"),t},log:function(){var e=["%cJS Tag","color: #fb1359; background: #ffcad4; padding: 4px"].concat(o(Array.prototype.slice.call(arguments)));console.log.apply(console,e)},isMobile:function(){return"ontouchstart"in e||navigator.msMaxTouchPoints||navigator.userAgent.indexOf("IEMobile")!==-1},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isValidNumber:function(e){return"number"==typeof e&&!isNaN(e)},isValidTagId:function(e){var t=/^[A-F\d]{8}-[A-F\d]{4}-4[A-F\d]{3}-[89AB][A-F\d]{3}-[A-F\d]{12}$/i;return e&&"string"==typeof e&&e.length>0&&(t.test(e)||e.match(/^[0-9a-fA-F]{24}$/))},isTopFrame:function(){return e.top===e},inKnotchPage:function(){var e=["views/unit.html","assets.knotch.host","www.knotch-cdn.com","/survey/"];return e.reduce(function(e,t){return e||location.href.indexOf(t)!==-1},!1)},inDevTestPage:function(){var t=e.location.hostname.indexOf("knotch.test")!==-1,n="test"===this.config.env||"development"===this.config.env;if(t&&n)return!0},isDemo:function(){return c.getScriptFlag("demo")},isDebug:function(){var e=!this.isTopFrame()&&document.referrer?document.referrer:this.getBrowserURL(),t=Object.keys(this.getQueryParams(e)),n=t.indexOf("knotch_debug");return n!==-1||c.getScriptFlag("debug")},getAccountId:function(){return c.getScriptAttribute("data-account")},getScriptFlag:function(e){try{var t=document.currentScript||document.querySelector('script[src*="knotch"]'),n=""===t.getAttribute(e),i="true"===t.getAttribute(e)||"1"===t.getAttribute(e);return n||i}catch(e){return!1}},getScriptAttribute:function(e){try{var t=document.currentScript||document.querySelector('script[src*="knotch"]');return t.getAttribute(e)}catch(e){return!1}},getReferrer:function(){return c.isTopFrame()?document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").getAttribute("href"):e.location.origin+e.location.pathname:this.localData.referrer=document.referrer},getCanonicalURL:function(){return document.querySelector("meta[property='og:url']")?document.querySelector("meta[property='og:url']").getAttribute("content"):document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").getAttribute("href"):document.querySelector("meta[name='canonical']")?document.querySelector("meta[name='canonical']").getAttribute("content"):null},getBrowserURL:function(){var t=null;return document.URL?t=document.URL:e.location.href?t=e.location.href:e.location.host&&e.location.pathname&&(t="".concat(e.location.protocol,"//").concat(e.location.host).concat(e.location.pathname)),t?t:(e.Knotch.bugsnag.reportError(new Error("browser URL doesn't exist"),this.localData),null)},show:function(e){e&&(e.style.display="block")},hide:function(e){e&&(e.style.display="none")},hasClass:function(e,t){return!!e&&(e.classList&&e.classList.contains(t))},addClass:function(e,t){if(e)if(e instanceof NodeList||e instanceof HTMLCollection)for(var n=0,i=e.length;n<i;n++)this.hasClass(e[n],t)||e[n].classList.add(t);else e.classList.add(t)},removeClass:function(e,t){if(e)if(e instanceof NodeList||e instanceof HTMLCollection)for(var n=0,i=e.length;n<i;n++)this.hasClass(e[n],t)&&e[n].classList.remove(t);else e.classList.remove(t)},removeNode:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},has3dSupport:function(){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!==n.exec(t)){var i=parseFloat(RegExp.$1);return i>10}var r,o=document.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(o,null);for(var s in a)if(void 0!==o.style[s]){o.style[s]="translate3d(1px,1px,1px)";var u=e.getComputedStyle(o);r=u&&u.getPropertyValue(a[s])}return document.body.removeChild(o),r&&r.length>0&&"none"!==r},fadeIn:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if(t){t.style.opacity=0,t.style.display="block";var i=+new Date,r=function r(){t.style.opacity=+t.style.opacity+(new Date-i)/n,i=+new Date,+t.style.opacity<1?e.requestAnimationFrame&&e.requestAnimationFrame(r)||setTimeout(r,16):t.style.opacity=1};r()}},fadeOut:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if(t){t.style.opacity=1;var i=+new Date,r=function r(){t.style.opacity=+t.style.opacity-(new Date-i)/n,i=+new Date,+t.style.opacity>0?e.requestAnimationFrame&&e.requestAnimationFrame(r)||setTimeout(r,16):(t.style.opacity=0,t.style.display="none")};r()}},get:function(t,n,i,r){var o,a="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return o=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onerror=function(){return o.status>=500&&Knotch.bugsnag.reportError(new Error(o.responseText),{name:"".concat(o.status," request error"),data:n}),!1},o.onreadystatechange=function(){if(o.readyState===a)if(200===o.status){var e=o.responseText;if(e)try{var n=JSON.parse(e)}catch(n){Knotch.bugsnag.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}i(n)}else o.status>=500?r(o.status,o.statusText,o.readyState,o.responseText,o.getAllResponseHeaders()):0===o.status&&r(o.status,o.statusText,o.readyState)},o.open("GET",t,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n)),o},post:function(t,n,i,r){var o,a="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return o=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onloadend=function(){return o.status>=400&&Knotch.bugsnag.reportError(new Error(o.responseText),{name:"404 - not found",data:n}),!1},o.onerror=function(){return o.status>=500&&Knotch.bugsnag.reportError(new Error(o.responseText),{name:"".concat(o.status," request error"),data:n}),!1},o.onreadystatechange=function(){if(o.readyState===a){var e=o.responseText;if(e&&!e.match(/</))try{var n=JSON.parse(e)}catch(n){Knotch.bugsnag.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}200===o.status?i(n):o.status>=400?r(o.status,o.statusText):0===o.stats&&r(o.status,o.statusText)}},o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n)),o},onEvent:function(e,t,n){function i(e,t){for(var i=0;i<t.length;i++)try{e.addEventListener?e.addEventListener(t[i],n,!1):e.attachEvent&&e.attachEvent("on".concat(t[i]),n)}catch(n){Knotch.bugsnag.reportError(n,{name:"Error while attaching event listener",data:{node:e,events:t}})}}if(t){var r=null;if(r=e.split(" ").length>1?e.split(" "):[e],t instanceof NodeList||t instanceof HTMLCollection){t.length||(t=[t]);for(var o=0;o<t.length;o++)i(t[o],r)}else{var a=t instanceof Array?t[0]:t;i(a,r)}}},offEvent:function(t,n,i){var r=[t];if(t.split(" ").length>1&&(r=t.split(" ")),n)if(n!==e){n.length||(n=[n]);for(var o=n.length,a=0;a<o;a++)for(var s=0;s<r.length;s++)try{if(1===n.length,n[a].removeEventListener)return n[a].removeEventListener(r[s],i,!1),!0;if(n[a].detachEvent)return n[a].detachEvent("on".concat(r[s]),i)}catch(e){Knotch.bugsnag.reportError(e,{name:"Error while detaching event listener",data:{nodeList:n,events:r}})}}else try{for(var s=0;s<r.length;s++)e.top.removeEventListener?e.top.removeEventListener(r[s],i,!1):e.top.detachEvent&&e.top.detachEvent("on".concat(r[s]),i)}catch(e){Knotch.bugsnag.reportError(e,{name:"Error while detaching event listener",data:{nodeList:n,events:r}})}},trigger:function(t,n,i){var r=null;e.CustomEvent?r=new CustomEvent(n,i):(r=document.createEvent("CustomEvent"),r.initCustomEvent(n,!0,!0,i)),t.dispatchEvent(r)},parents:function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;for(e=e.parentElement;e&&!n.call(e,t);)e=e.parentElement;return e},animate:function(e,t,n,i){e.style.transition="all ".concat(n/1e3,"s ease-out"),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),i&&setTimeout(function(){e.removeAttribute("style")},n)},ready:function t(n){var i,r,t=!1;if(i=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r)):(document.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))},r=function(){t||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(t=!0,i(),n())},"complete"===document.readyState)n();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r);else{document.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var o=!1;try{o=null==e.frameElement&&document.documentElement}catch(e){}o&&o.doScroll&&!function e(){if(!t){try{o.doScroll("left")}catch(t){return setTimeout(e,50)}t=!0,i(),n()}}()}},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},listen:function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent(e,n)},scrollToY:function(t,n,i){function r(){a+=1/60;var n=a/s,c=u[i](n);n<1?(requestAnimFrame(r),e.scrollTo(0,o+(t-o)*c)):e.scrollTo(0,t)}var o=e.scrollY||document.documentElement.scrollTop,t=t||0,n=n||2e3,i=i||"easeOutSine",a=0,s=Math.max(.1,Math.min(Math.abs(o-t)/n,.8)),u={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};r()},isChildOf:function(e,t){for(;(e=e.parentNode)&&e!==t;);return!!e},serialize:function(e,t){var n,i=[];for(n in e)if(e.hasOwnProperty(n)){var o=t?"".concat(t,"[").concat(n,"]"):n,a=e[n];i.push(null!==a&&"object"===r(a)?this.serialize(a,o):"".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(a)))}return i.join("&")},extractIdFromNode:function(e){if(!e)return null;var t=e.getAttribute("class");if(!t||t.length<1||"string"!=typeof t)return null;var n=t.split(" "),i=n.filter(function(e){return e.indexOf("knotch_")!==-1})[0];if(!i)return null;var r=i.split("_")[1];return r?r:null},stringContains:function(e,t){return e&&e.length&&t&&t.length?e.indexOf(t)!==-1:null}},d=c;i.default=d},{}],16:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("@knotchlabs/nodefinder")),c=r(t("../helpers/vanillaHelper.js")),d=t("./SmartUnitUtils.js"),l=function(){function t(e){var n=e.accountId,i=e.knotchConfig,r=e.bugsnag;o(this,t),this.accountId=n,this.config=i,this.bugsnag=r,this.smartUnitTracker=null,this.init()}return s(t,[{key:"init",value:function(){var t=this;c.default.ready(function(){e.localURLToUnitList?t.startNodefinder(e.localURLToUnitList):(0,d.getUnitList)(t.accountId,function(e){t.startNodefinder(e)})})}},{key:"startNodefinder",value:function(e){var t=this;this.smartUnitTracker=(0,u.default)({accountId:this.accountId,inject:d.inject,pageValidate:function(e,n){return(0,d.bypassSurveylessUnit)(e,n,t.config,t.bugsnag)},urlMap:e,bugsnag:this.bugsnag})}}]),t}(),h=l;i.default=h},{"../helpers/vanillaHelper.js":15,"./SmartUnitUtils.js":17,"@knotchlabs/nodefinder":10}],17:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.bypassSurveylessUnit=i.getUnitList=i.testInject=i.inject=void 0;var o=r(t("../helpers/vanillaHelper.js")),a=function(e){var t=e.pageNode,n=e.lastParagraphNode,i=e.urlMap,r=e.url,o=e.injectedCallback,a=e.unbindListeners,s=e.bugsnag,u=i[r];if(!u||!u.length)return s.pushBreadCrumb({name:"No placeholder ID found for this URL",unitsForPage:u}),a();var c=u[0];if(t.querySelector(".knotch_".concat(c)))return s.pushBreadCrumb({name:"Unit already found on the page",unitsForPage:u}),a();var d=document.createElement("div");return d.setAttribute("class","knotch_".concat(c)),d.setAttribute("style","clear: both;"),n?(n.insertAdjacentElement("afterend",d),o(),a(),s.pushBreadCrumb({name:"Appended placeholder to page body",metaData:{tagName:n.tagName,class:n.className,id:n.id}}),void 0):(a(),s.reportError(new Error("Last paragraph node could not be found"),{data:{url:r}}))};i.inject=a;var s=function(e){var t=e.pageBodyNode,n=e.lastParagraphNode,i=e.injectedCallback,r=e.unbindListeners;if(!t||t===document.body)return r(),alert("Page is not smart unit compatible");if(!t.querySelector(".knotch_unit")){var o=document.createElement("div");o.setAttribute("class","knotch_unit"),o.setAttribute("style","clear: both; background-color: pink; height: 200px; text-align: center;"),o.innerText="KNOTCH SMART UNIT",n.insertAdjacentElement("afterend",o),i(),r(),o.scrollIntoView(),alert("Succesfully appended smart unit to page body")}};i.testInject=s;var u=function t(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n?(e.Knotch.bugsnag.pushBreadCrumb({name:"Fetching Unit to URL map"}),void o.default.get("https://units.knotch.it/url-map/".concat(n,".json"),null,function(t){return t&&!o.default.isEmptyObject(t)?i(t):e.Knotch.bugsnag.pushBreadCrumb({name:"Empty or invalid URL map provided",metaData:{data:t}})},function(o,a,s,u,c){return 5!==r?setTimeout(function(){return t(n,i,r+1)},1e3):void e.Knotch.bugsnag.reportError(new Error("Failed to fetch unit list"),{data:{status:o,statusText:a,readyState:s,responseText:u,responseHeaders:c,accountId:n,url:"https://units.knotch.it/url-map/".concat(n,".json")}})})):e.Knotch.bugsnag.reportError(new Error("No account ID provided"),n)};i.getUnitList=u;var c=function(t,n,i,r){if(e.knotchUnits&&e.knotchUnits[t]){var a=e.knotchUnits[t];if(a&&a.surveyless){var s=document.createElement("div");return s.setAttribute("class","knotch_".concat(t)),document.body.appendChild(s),n(!1)}return n(!0)}o.default.get("".concat(i.metadata,"/").concat(t,".json"),{},function(i){var r=i;if(e.knotchUnits[i.public_id]=i,r&&r.surveyless){var o=document.createElement("div");return o.setAttribute("class","knotch_".concat(t)),document.body.appendChild(o),n(!1)}return n(!0)},function(e,i,o,a,s){return r.reportError(i,{data:{id:t,readyState:o,responseText:a,responseHeaders:s,status:e},severity:"info"}),n(!1)})};i.bypassSurveylessUnit=c},{"../helpers/vanillaHelper.js":15}],18:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=t("../../../tmp/config"),c=r(t("../helpers/vanillaHelper")),d=function(){function t(n){o(this,t),this.iframe=this.createFrame(n),this.ready=!1,this.inIframe=n.inIframe,this.units={},this.queue=[],e.Knotch.bugsnag.pushBreadCrumb({name:"Added reporter"})}return s(t,[{key:"createFrame",value:function(e){var t=e.debug,n=document.createElement("iframe"),i=u.knotchConfig.reporter;return t&&(i+="?debug=true"),c.default.extend(n,{name:"measurementKnotchReporter",title:"Knotch Reporter Frame",src:i,frameBorder:"0",display:"none",id:"measurementKnotchReporter",width:"0",height:"0",ariaHidden:!0}),n.style.display="none",c.default.ready(function(){return document.body.appendChild(n)}),n}},{key:"init",value:function(){this.ready=!0,this.flush()}},{key:"flush",value:function(){for(var e=this.queue.length,t=0;t<e;t++){var n=this.queue.pop();this.send(n)}}},{key:"getPagePayload",value:function(){var t={content_type:"web",browser_url:document.referrer,user_agent:e.navigator.userAgent,unit_type:"iframe",unit_version:u.knotchConfig.version};return this.inIframe||c.default.extend(t,this.getDynamicPagePayload()),t}},{key:"getDynamicPagePayload",value:function(){var e={unit_type:"jstag"};return c.default.extend(e,{browser_url:c.default.getBrowserURL(),canonical_url:c.default.getCanonicalURL(),referrer_url:document.referrer}),document.body&&c.default.extend(e,{content_height:document.body.scrollHeight,content_width:document.body.scrollWidth}),e}},{key:"initUnit",value:function(t){var n=t.config&&t.config.thirdPartyPixels,i={organization_id:t.organizationId,survey_language:t.languageCode,survey_type:null!==t.videoType?"video":"article",survey_variation:t.public_id,survey_id:t.public_id},r=this.getPagePayload(),o=c.default.extend({},r,i);this.send({eventType:"updateUnitData",data:o,surveyId:t.public_id}),n&&n.length&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Sending third party pixel to reporter",metaData:t}),this.send({eventType:"thirdPartyPixel",data:n,surveyId:t.public_id}))}},{key:"send",value:function(t){return this.iframe&&this.ready?t.eventType?void this.iframe.contentWindow.postMessage(t,u.knotchConfig.reporter):e.Knotch.bugsnag.pushBreadCrumb({name:"payload must have an eventType"}):(e.Knotch.bugsnag.pushBreadCrumb({name:"iframe not ready yet",event:t.eventType,payloadType:t.data.type}),this.queue.push(t))}},{key:"sendUnitEvent",value:function(e){var t=e.data,n=e.surveyId,i=e.timer,r=this.inIframe?{}:this.getDynamicPagePayload(),o=c.default.extend({},r,t,{timer:i});this.send({eventType:"unitEvent",data:o,surveyId:n,productType:"measurement"})}}]),t}(),l=d;i.default=l},{"../../../tmp/config":42,"../helpers/vanillaHelper":15}],19:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.isMobile=a.default.isMobile(),this.isVideo=null!==t.videoType,this.videoType=this.isVideo&&t.videoType,this.isInIframe=!a.default.isTopFrame(),this.inKnotchPage=a.default.inKnotchPage(),this.inDevTestPage=a.default.inDevTestPage(),this.isValid=!0,this.node=e,this.data=t,this.container=document.querySelector(".knotch_".concat(t.public_id)),this.iframe=document.createElement("iframe"),this.iframe.frameBorder="0",this.iframe.title="Feedback Question By Knotch",this.iframe.id="knotchframe_".concat(t.public_id),this.setup(),this.trackRemoval()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper.js")),s={BRIGHTCOVE:0,YOUTUBE:1,VIMEO:2,OOYALA:3,NYLON:4,HTML5:5,JWPLAYER:7,VPAID:8,WISTIA:9,FAVE:10,SMPLAYER:11},u=[s.YOUTUBE,s.VIMEO,s.VPAID,s.BRIGHTCOVE],c={width:"100%",height:"100%",position:"absolute",top:0,left:0},d={border:"1px solid rgba(255, 255, 255, 0.35)",borderRadius:"6px"},l="100%",h="320px",f="360px";o.prototype={trackRemoval:function(){var t=this;if(e.MutationObserver){var n=new MutationObserver(function(n){n.forEach(function(n){var i=[].slice.call(n.removedNodes),r=i.indexOf(t.iframe)>-1,o=i.filter(function(e){return e.contains(t.iframe)}).length>0;r?e.Knotch.bugsnag.pushBreadCrumb({name:"Knotch Unit was removed"}):o&&e.Knotch.bugsnag.pushBreadCrumb({name:"Knotch Unit Placeholder was removed"})})});n.observe(this.container.parentNode,{subtree:!0,childList:!0})}},setup:function(){if(null!==this.node.querySelector("[id^=knotchframe_]"))return this.isValid=!1,e.Knotch.bugsnag.pushBreadCrumb({name:"A unit already exists"});a.default.onEvent("touchstart",this.iframe,function(e){return e.preventDefault()});var t=a.default.hasClass(this.node,"knotchArticleEmbed"),n=a.default.hasClass(this.node,"knotchVideoEmbed"),i=a.default.getScriptFlag("generator"),r=this.isVideo&&t||!this.isVideo&&n;if(i||this.isInIframe)e.Knotch.bugsnag.pushBreadCrumb({name:"Bypassing mismatch check ".concat(this.data.public_id)});else if(r)return this.isValid=!1,e.Knotch.bugsnag.pushBreadCrumb({name:"Mismatch between data & integration ".concat(this.data.public_id)});return this.isInIframe&&(this.inKnotchPage||this.inDevTestPage||i)?this.inKnotchIframe():this.inKnotchPage?this.onKnotchPage():this.onClientPage(),this.isValid?this.node.appendChild(this.iframe):e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid unit integration: ".concat(this.data.public_id)})},getIframe:function(){return this.isValid?this.iframe:null},inKnotchIframe:function(){this.setLang(),this.isVideo&&this.createVidContainer(),a.default.extend(this.iframe.style,c);var e=document.querySelector(".centerContainer");e&&a.default.extend(e.style,{width:"100%",height:"100%",margin:0,top:0,left:0});var t=document.querySelector("#knotchFullPage > .overlay");document.getElementById("knotchFullPage").style.position="absolute",t&&a.default.removeNode(t)},setLang:function(){document.documentElement.setAttribute("lang",this.data.languageCode)},onKnotchPage:function(){this.setLang(),a.default.extend(this.iframe.style,c),this.isMobile?a.default.extend(this.container.style,c):(a.default.extend(this.container.style,{position:"relative",minHeight:f,width:"100%"}),a.default.extend(this.iframe.style,d)),this.isVideo&&this.createVidContainer(),this.setupOwnedPageStyle(this.data)},onClientPage:function(){this.isVideo?this.onClientPageVideo():this.onClientPageArticle()},setupOwnedPageStyle:function(){var e=document.getElementById("knotchFullPage"),t=this.data;e&&t&&(t.imageUrl&&a.default.extend(e.style,{backgroundImage:"url(".concat(t.imageUrl,")")}),t.bgcolor&&(a.default.extend(e.style,{backgroundColor:t.bgcolor}),document.querySelector(".overlay").style.opacity="0.5"))},createVidContainer:function(){if(u.indexOf(this.videoType)!==-1){var e=document.createElement("div");e.id="knotchVideo",e.frameBorder="0",e.setAttribute("data-knotch",this.data.public_id),a.default.extend(this.container.style,c,{zIndex:-1,display:"none"}),a.default.extend(e.style,c,{zIndex:1}),this.node.parentNode.insertBefore(e,this.node)}},onClientPageArticle:function(){var e=l,t=h;this.node.hasAttribute("data-width")&&(e=this.node.getAttribute("data-width").match(/[\d\.]+(%|px)/g)),this.node.hasAttribute("data-height")&&(t=this.node.getAttribute("data-height").match(/[\d\.]+(%|px)/g)),a.default.extend(this.iframe.style,{width:e,height:t,margin:"18px auto",display:"block"})},onClientPageVideo:function(){var t,n,i=this.container.parentNode,r=document.querySelector('[data-knotch="'.concat(this.data.public_id,'"]'));if(this.videoType===s.BRIGHTCOVE&&(r=document.querySelector('video[data-knotch="'.concat(this.data.public_id,'"]'))),!r)return void(this.isValid=!1);var o=e.getComputedStyle(i).position;"static"!==o&&""!==o||(i.style.position="relative");var u=r.offsetTop>-1?"".concat(r.offsetTop,"px"):0,d=r.offsetLeft>-1?"".concat(r.offsetLeft,"px"):0,l=e.getComputedStyle(r).transform||"none";a.default.extend(this.container.style,c,{zIndex:-1,display:"none"}),r.offsetWidth>0&&(t="".concat(r.offsetWidth,"px")),r.offsetHeight>0&&(n="".concat(r.offsetHeight,"px"));var h={top:u,left:d,height:"100%"},f=function(e){switch(e){case s.YOUTUBE:return{top:u,left:d,height:n,width:t,transform:l};default:return{top:u,left:d,maxWidth:t,maxHeight:n}}};a.default.extend(this.container.style,f(this.videoType)||h),a.default.extend(this.iframe.style,{height:"100%",width:"100%",maxWidth:t,maxHeight:n,margin:"auto",display:"none"})},getIframeDoc:function(){if(this.isValid)if(this.iframe&&this.iframe.nodeType===Node.ELEMENT_NODE)try{var t=this.iframe.document;if(this.iframe.contentDocument?t=this.iframe.contentDocument:this.iframe.contentWindow&&(t=this.iframe.contentWindow.document),t)return t;e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid iframe document"})}catch(t){e.Knotch.bugsnag.reportError(t)}else e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid node passed to getIframeDoc"});else e.Knotch.bugsnag.pushBreadCrumb({name:"Request iframe document from invalid unit"});return!1},fadeIn:function(){this.container.style.zIndex=9999,a.default.show(this.container),a.default.fadeIn(this.iframe,300)},fadeOut:function(){var e=this;a.default.fadeOut(this.iframe,300),setTimeout(function(){e.container.style.zIndex=-1,a.default.hide(e.container)},300)},onIframeEvent:function(e,t){a.default.onEvent(e,this.iframe,t)}};var p=o;i.default=p},{"../../helpers/vanillaHelper.js":15}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){return!(!e.children||!e.children[0]||"SOURCE"!==e.children[0].tagName)},r=function(e){return!!(e.src&&e.src.length>0)},o=function(e){return"IFRAME"===e.tagName},a=function(e){return"VIDEO"===e.tagName},s=function(e){var t=e.querySelector("video"),n="VIDEO-JS"===e.tagName;return!!t&&(n&&(i(t)||r(t)))},u={brightcove:function(e){return s(e)||a(e)&&(i(e)||r(e))},FAVE:function(e){return e.className.indexOf("FavePlayer")!==-1},html5video:function(e){return a(e)&&(i(e)||r(e))},jwplayer:function(e){return e.className.indexOf("jwplayer")!==-1},kaltura:function(e){return o(e)&&e.id.indexOf("_ifp")!==-1},VPAID:function(e){return e.className.indexOf("knotchVpaid")!==-1},youtube:function(e){return o(e)&&r(e)},smplayer:function(e){return o(e)&&e.className.indexOf("sm-iframe")!==-1}},c=u;n.default=c},{}],21:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=r(t("../helpers/Bugsnag.js")),a=r(t("../helpers/vanillaHelper.js")),s=r(t("./tracker.js")),u=r(t("./dom/UnitDOMHandler.js")),c=r(t("./dom/VideoDOMChecks.js")),d=r(t("../helpers/Cookies.js")),l=r(t("../smartunits/SmartUnitTracker.js")),h=t("../../../tmp/config.js"),f={init:function(){a.default.config=h.knotchConfig,f.bugsnag=new o.default(h.knotchConfig),f.units={},f.debug=a.default.isDebug(),f.isMobile=a.default.isMobile(),f.inIframe=!a.default.isTopFrame(),f.inKnotchPage=a.default.inKnotchPage(),f.demo=a.default.isDemo(),e.knotchUnits||(e.knotchUnits={});var t={demo:f.demo,inIframe:f.inIframe,inKnotchPage:f.inKnotchPage},n=a.default.getAccountId();n&&(f.SmartUnitTracker=new l.default({accountId:n,knotchConfig:h.knotchConfig,bugsnag:f.bugsnag})),f.tracker=new s.default(t),f.checkPlaceholders(),f.interval=setInterval(f.checkPlaceholders,2e3),e.setTimeout(function(){return clearInterval(f.interval)},18e5)},addUnit:function(t){if(!a.default.isValidTagId(t))return void console.warn("[Knotch#addUnit] The Unit ID ".concat(t," is not valid"));if(f.units[t]||document.getElementById("knotchframe_55ed7ee027ba796e6ff35103"))return void console.warn("[Knotch#addUnit] Unit ".concat(t," already exists"));var n=document.querySelector('div[class^="knotch_'.concat(t,'"]')),i=document.querySelector('[data-knotch="'.concat(t,'"]'));if(n)n.removeAttribute("knotch-ignore");else{if(!i)return void console.warn("[Knotch#addUnit] No placeholders found for id ".concat(t));i.removeAttribute("knotch-ignore")}e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Adding Unit",metaData:{id:t}}),f.checkPlaceholders()},enableUnit:function(t){if(!a.default.isValidTagId(t))return void console.warn("[Knotch#enableUnit] The Unit ID ".concat(t," is not valid"));var n=document.querySelector('div[class^="knotch_'.concat(t,'"]'));return n?(f.units[t]||console.warn("[Knotch#enableUnit] Unit ".concat(t," does not exist")),n.removeAttribute("hidden"),e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Enabling Unit",metaData:{id:t}}),f.units[t].disabled=!1,void f.tracker.enableUnit(t)):void console.warn("[Knotch#enableUnit] There is no placeholder with the id ".concat(t))},disableUnit:function(t){if(!a.default.isValidTagId(t))return void console.warn("[Knotch#disableUnit] The Unit ID ".concat(t," is not valid"));f.units[t]||console.warn("[Knotch#disableUnit] Unit ".concat(t," does not exist"));var n=document.querySelector('div[class^="knotch_'.concat(t,'"]'));return n?(n.setAttribute("hidden",!0),e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Disabling Unit",metaData:{id:t}}),f.units[t].disabled=!0,void f.tracker.disableUnit(t)):void console.warn("[Knotch#disableUnit] There is no placeholder with the id ".concat(t))},removeUnit:function(t){if(!a.default.isValidTagId(t))return void console.warn("[Knotch#removeUnit] The Unit ID ".concat(t," is not valid"));if(!f.units[t])return f.bugsnag.pushBreadCrumb({name:"unit does not exist"}),void console.warn("[Knotch#removeUnit] Unit does not exist or has already been removed");var n=document.querySelector('div[class^="knotch_'.concat(t,'"]'));if(!n)return void console.warn("[Knotch#removeUnit] There is no placeholder with the id ".concat(t));if(e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Removing Unit",metaData:{id:t}}),n.setAttribute("knotch-ignore",!0),a.default.hasClass(n,"knotchArticleEmbed")){var i=document.getElementById("knotchframe_".concat(t));if(!i)return void console.warn("[Knotch#removeUnit] No unit frame detected for ".concat(t));a.default.removeClass(n,"knotchArticleEmbed"),a.default.removeNode(i),delete f.units[t]}if(a.default.hasClass(n,"knotchVideoEmbed")){var r=document.querySelector('[data-knotch="'.concat(t,'"]'));if(!r)return void console.warn("[Knotch#removeUnit] No video player found with data-knotch = ".concat(t));r.setAttribute("knotch-ignore",!0),a.default.removeNode(n),delete f.units[t]}f.tracker.removeUnit(t)},setFocus:function(t){return a.default.isValidTagId(t)?(e.Knotch.bugsnag.pushBreadCrumb({name:"[Knotch#setFocus] Setting focus to unit ".concat(t),metaData:{id:t}}),Object.keys(f.units).map(function(e){e!==t&&f.removeUnit(e)}),void f.addUnit(t)):void console.warn("[Knotch#setFocus] The Unit ID ".concat(t," is not valid"))},checkPlaceholders:function(){for(var t=document.querySelectorAll('div[class^="knotch_"]'),n=document.querySelectorAll("[data-knotch]"),i=0;i<t.length;i++)if(!t[i].hasAttribute("knotch-ignore")&&!a.default.hasClass(t[i],"knotchArticleEmbed")){var r=a.default.extractIdFromNode(t[i]);r||e.Knotch.bugsnag.pushBreadCrumb({name:"id was not properly extracted"}),a.default.isValidTagId(r)&&!f.units[r]&&(f.units[r]={},a.default.addClass(t[i],"knotchArticleEmbed"),f.fetchData(r))}for(var o=0;o<n.length;o++){var s=n[o];if(!(s.hasAttribute("knotch-ignore")||a.default.hasClass(t[o],"knotchVideoEmbed")||("DIV"===s.tagName||"VIDEO-JS"===s.tagName)&&s.className.indexOf("video-js")>-1)){var u=s.getAttribute("data-knotch");if(a.default.isValidTagId(u)&&!f.units[u]){var d=!1;for(var l in c.default)d=d||c.default[l](s);if(!d)return f.bugsnag.pushBreadCrumb({name:"the data-knotch attribute is on an unsupported node"});f.units[u]={};var h=document.createElement("div");h.className="knotch_".concat(u," knotchVideoEmbed"),n[o].parentNode.insertBefore(h,n[o].nextSibling),f.fetchData(u)}}}},fetchData:function(t){e.knotchUnits&&e.knotchUnits[t]?f.fillIframe(e.knotchUnits[t]):a.default.get("".concat(h.knotchConfig.metadata,"/").concat(t,".json"),{},function(e){return f.fillIframe(e)},function(e,n,i,r,o){return f.bugsnag.reportError(n,{data:{id:t,readyState:i,responseText:r,responseHeaders:o,status:e},severity:"info"})})},fillIframe:function(t){if(t){var n;try{n=JSON.stringify(t)}catch(e){return f.bugsnag.reportError(e)}if(!f.units[t.public_id]||!f.units[t.public_id].data){f.units[t.public_id].data=t,e.knotchUnits[t.public_id]=t,f.bugsnag.pushBreadCrumb({name:"Valid Unit Data returned ".concat(t.public_id)});var i=document.querySelector(".knotch_".concat(t.public_id));if(!i)return f.bugsnag.pushBreadCrumb({name:"No available placeholder for unit setup ".concat(t.public_id)});var r=i.getAttribute("data-track-current-only");if(r&&f.checkInfiniteScroll(t.public_id),t.surveyless)f.bugsnag.pushBreadCrumb({name:"Adding surveyless unit"}),f.tracker.addUnit(t);else{var o=new u.default(i,t);if(f.units[t.public_id].DOMHandler=o,!o.isValid)return f.bugsnag.pushBreadCrumb({name:"No iframe created ".concat(t.public_id)});var a=o.getIframeDoc(),s=i.getAttribute("data-layout"),c={knotchedSentiment:d.default.get("knotched:".concat(t.public_id)),followedUp:d.default.get("followup:".concat(t.public_id)),isMobile:f.isMobile,isDemo:f.demo,survey:n,customLayout:JSON.stringify(s),knotchConfig:JSON.stringify(h.knotchConfig)},l="";for(var p in c)l+="".concat("<script> window.").concat(p," = ").concat(c[p],"</scr")+"ipt>";var m="".concat(l).concat("<scri"+"pt src=".concat(JSON.parse(c.knotchConfig).measurementUnit,">  </scri")+"pt>");if(a){f.bugsnag.pushBreadCrumb({name:"Injecting template in iframe  ".concat(t.public_id)});try{a.open(),a.writeln(m),a.close(),f.tracker.addUnit(t)}catch(e){f.bugsnag.reportError(e)}}else f.bugsnag.pushBreadCrumb({name:"Unable to find iFrame's document ".concat(t.public_id)})}}}},checkInfiniteScroll:function(t){var n=a.default.getBrowserURL();f.units[t].checkURL=e.setInterval(function(){a.default.getBrowserURL()!==n&&f.units[t].disabled!==!0?f.disableUnit(t):a.default.getBrowserURL()===n&&f.units[t].disabled===!0&&f.enableUnit(t)},2e3),e.setTimeout(function(){clearInterval(f.units[t].checkURL)},18e5)}};e.Knotch||(e.Knotch=f,f.init())},{"../../../tmp/config.js":42,"../helpers/Bugsnag.js":12,"../helpers/Cookies.js":13,"../helpers/vanillaHelper.js":15,"../smartunits/SmartUnitTracker.js":16,"./dom/UnitDOMHandler.js":19,"./dom/VideoDOMChecks.js":20,"./tracker.js":25}],22:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startStopTimes={},this.options=t,this.event=e,this.events={},this.debug=!1,this.disabled=!1,this.mobile=a.default.isMobile(),this.mobile&&this.mobileListeners()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper.js")),s=r(t("../../helpers/ifvisible.js"));o.prototype={init:function(){var t=this;try{this.setIdleDurationInSeconds(9999);var n=function(){return t.startTimer()},i=function(){return t.stopTimer()};"time_playing_video"!==this.event&&(s.default.on("blur",i),s.default.on("focus",n),s.default.on("idle",i),s.default.on("wakeup",n))}catch(t){e.Knotch.bugsnag.reportError(t)}},startTimer:function(){function t(){return!(!e.performance||!e.performance.timing)}if(!this.disabled)if(void 0===this.startStopTimes[this.event])this.startStopTimes[this.event]=[];else{var n=this.startStopTimes[this.event],i=n[n.length-1];if(void 0!==i&&void 0===i.stopTime)return}var r=(new Date).getTime();t()&&"time_on_page"===this.event&&(r=e.performance.timing.navigationStart),this.startStopTimes[this.event].push({startTime:r,stopTime:void 0}),this.trigger("start")},stopTimer:function(){var e=this.startStopTimes[this.event];void 0!==e&&0!==e.length&&(void 0===e[e.length-1].stopTime&&(e[e.length-1].stopTime=(new Date).getTime()),this.trigger("stop"))},isStarted:function(){var e=this.startStopTimes[this.event];return"undefined"!=typeof e&&void 0===e[e.length-1].stopTime},resetRecordedPageTime:function(e){this.startStopTimes[e]=[]},resetAllRecordedPageTimes:function(){for(var e=Object.keys(this.startStopTimes),t=0;t<e.length;t++)this.resetRecordedPageTime(e[t])},setIdleDurationInSeconds:function(e){var t=parseFloat(e);if(isNaN(t)!==!1)throw new Error("An invalid duration time (".concat(e,") was provided."));s.default.setIdleDuration(t)},getTimeOnCurrentPage:function(){var t=this.startStopTimes[this.event];if(void 0!==t){for(var n=t[0].startTime,i=t[t.length-1].stopTime,r=0,o=0;o<t.length;o++){var a=t[o].startTime,s=t[o].stopTime;void 0===s&&(o<t.length-1&&e.Knotch.bugsnag.pushBreadCrumb({name:"setting stop time at interval ".concat(o+1,"/").concat(t.length," to current time: ").concat((new Date).getTime())}),s=(new Date).getTime(),i=s);var u=s-a;u<0&&e.Knotch.bugsnag.pushBreadCrumb({name:"negative time difference start",metaData:{startTime:a,stopTime:s,array:JSON.stringify(t)}});var c=parseInt(r,10)+parseInt(u,10);if(c>this.options.maxTime){this.disabled=!0,this.stopTimer(),this.clearBindings();break}r=c}return{startTime:n,endTime:i,timeSpent:r}}},on:function(e,t){var n=this.events[e]||[];n.push(t),this.events[e]=n},clearBindings:function(){this.events[this.event]=[]},off:function(t,n){var i=this.events[t];return i?void(this.events[t]=i.filter(function(e){return e.name!==n.name})):e.Knotch.bugsnag.reportError(new Error("Event trying to be removed is not present"),{data:{events:this.events,event:t}})},trigger:function(e,t){var n=this.events[e];!n||n.length<1||[].forEach.call(n,function(e){e(t)})},mobileListeners:function(){var t=this;try{var n,i;if("undefined"!=typeof document.hidden)n="hidden",i="visibilitychange";else if("undefined"!=typeof document.mozHidden)n="mozHidden",i="mozvisibilitychange";else if("undefined"!=typeof document.msHidden)n="msHidden",i="msvisibilitychange";else{if("undefined"==typeof document.webkitHidden)return;n="webkitHidden",i="webkitvisibilitychange"}"undefined"==typeof document.addEventListener?(e.Knotch.bugsnag.reportError(new Error("addEventListener not supported")),this.stopTimer(),this.disabled=!0):document.addEventListener(i,function(){document[n]?t.stopTimer():t.startTimer()},!1)}catch(t){e.Knotch.bugsnag.reportError(t,{name:"Error in attaching mobile page visibility changes"})}}};var u=o;i.default=u},{"../../helpers/ifvisible.js":14,"../../helpers/vanillaHelper.js":15}],23:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(t){var n=t.timer,i=t.event,r=t.tracker,o=t.id,a=t.logOptions;this.logOptions=a||{},this.id=o,this.timer=n,this.tracker=r,this.interval=1e3,this.expIndex=a.startExpIndex,this.count=0,this.done=!1,this.pollingTimer=null,this._initialized=!1,this.event=i,this.started=!1,this.url="/log/".concat(this.event),i||e.Knotch.bugsnag.reportError(new Error("Event Type required for Logging Timer.")),this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper.js")),s=["5bda134a7d4074b86cb1d23e"];o.prototype={init:function(){var t=this;try{this.timer.on("start",this._startPolling.bind(this)),this.timer.on("stop",this._stopPolling.bind(this)),a.default.onEvent("click",document.getElementById("killtop"),function(){t.timer.disabled=!0,t.stopTimer()})}catch(t){e.Knotch.bugsnag.reportError(t)}},initData:function(){this._initialized=!0},getNewInterval:function(){this.count%this.logOptions.countsToIncrease===0&&(e.Knotch.bugsnag.pushBreadCrumb({name:"incremented timer index"}),this.expIndex++),this.interval=1e3*(Math.pow(2,this.expIndex)-1)},startTimer:function(){e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.event," timer started")}),this.started=!0,this.done=!1,this.timer.startTimer()},stopTimer:function(){e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.event," timer stopped")}),this.started=!1,this.done=!0,this._logDataSync()},endTimer:function(){this.timer.disabled=!0,this.timer.stopTimer()},resetRecordedPageTime:function(e){this.startStopTimes[e]=[]},getTimeOnCurrentPage:function(){return this.timer.getTimeOnCurrentPage()},_startPolling:function(){this.started=!0,this.initData(),this._poll()},_stopPolling:function(){this.started=!1,clearTimeout(this.pollingTimer)},setMaxDuration:function(e){this.logOptions.maxTime=e},_poll:function(){if(!this.tracker.demo&&!this.timer.disabled){if("time_on_page"===this.event&&s.indexOf(this.id)!==-1)return Math.random()<.1&&e.Knotch.bugsnag.reportError(new Error("time on page triggered on ad"),{data:this.data}),void this._stopPolling();var t=this.getTimeOnCurrentPage(),n=this.logOptions.maxTime,i=t.timeSpent>n,r={type:this.event,survey_id:this.id};if("time_playing_video"===this.event&&(r.video_seconds_watched=t.timeSpent),t.timeSpent<0||t.end<t.begin){this._stopPolling();var o=Object.assign({},this.data,{count:this.count});e.Knotch.bugsnag.reportError(new Error("Negative time difference, killing"),{data:o}),this.endTimer(),this.removeListeners()}i?this._stopPolling():(this.count++,this.getNewInterval(),this.pollRequest=this.tracker.record(r),this.successHandler())}},_logDataSync:function(){this.timer.stopTimer(),this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollRequest&&this.pollRequest.abort(),this._poll()},successHandler:function(){clearTimeout(this.pollingTimer),this.done||(this.pollingTimer=e.setTimeout(this._poll.bind(this),this.interval))},errorHandler:function(t,n,i){this._stopPolling(),e.Knotch.bugsnag.reportError(i,{data:t})},removeListeners:function(){this.timer.off("start",this._startPolling.bind(this)),this.timer.off("stop",this._stopPolling.bind(this))}};var u=o;i.default=u},{"../../helpers/vanillaHelper.js":15}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LOG_OPTIONS_TIME_PLAYING_VIDEO=n.LOG_OPTIONS_TIME_ON_PAGE_AD_IFRAME=n.LOG_OPTIONS_TIME_ON_PAGE=void 0;var i={countsToIncrease:16,startExpIndex:3,maxTime:36e5};n.LOG_OPTIONS_TIME_ON_PAGE=i;var r={countsToIncrease:16,startExpIndex:4,maxTime:3e5};n.LOG_OPTIONS_TIME_ON_PAGE_AD_IFRAME=r;var o={countsToIncrease:16,startExpIndex:3,maxTime:72e5};n.LOG_OPTIONS_TIME_PLAYING_VIDEO=o},{}],25:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){this.demo=e.demo,this.inIframe=e.inIframe,this.inKnotchPage=e.inKnotchPage,this.inAdIframe=this.isInAdIframe(),this.mobile=u.default.hasClass(document.body,"mobile"),this.debug=u.default.isDebug(),this.units={},this.queue=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../helpers/vanillaHelper")),c=r(t("./timers/TimerLogger")),d=r(t("./timers/SophistiTimer")),l=r(t("./ReporterHandler")),h=r(t("../helpers/Cookies")),f=r(t("./trackers/ViewabilityTracker")),p=r(t("./trackers/VideoTracker.js")),m=r(t("./trackers/ScrollDepthTracker")),v=r(t("./trackers/ScrolledPastTracker")),g=t("./timers/constants.js"),y=r(t("./trackers/GAFrameTracker")),b=7e3;s.prototype={isInAdIframe:function(){var e=u.default.getBrowserURL();if(e){var t=/^(http|https):\/\/tpc\.googlesyndication/gm;return this.inIframe&&t.test(e)}return!1},init:function(){this.demo||(this.reporter=new l.default({inIframe:this.inIframe,debug:this.debug}),this.timeOnPageTimer=new d.default("time_on_page",g.LOG_OPTIONS_TIME_ON_PAGE),this.timeOnPageTimer.init(),this.timeOnPageTimer.startTimer(),this.viewability=new f.default(this),this.inIframe||this.inKnotchPage||(this.scrollDepth=new m.default({tracker:this})),u.default.listen("message",e,this.handleEvents.bind(this)))},handleEvents:function(e){var t=e.data,n=t.data,i=t.eventType,r=t.id;switch(i){case"hideIframe":this.hideIframe(r);break;case"knotchEvent":this.record(n);break;case"knotchHandshake":this.reporter.init()}},thirdPartyEvent:function(t){if(!t||!t.name)return e.Knotch.bugsnag.reportError(new Error("Invalid third party event data"),t);e.Knotch.bugsnag.pushBreadCrumb({name:"Third party event sent: ".concat(t.name)});var n=o({type:"knotch_thirdparty"},t);e.parent.postMessage(n,"*")},initTimeOnPage:function(t){var n=this.units[t],i=n.data.videoType,r=8===i;if(!n.logTimeOnPage&&!r){var o=this.inAdIframe?g.LOG_OPTIONS_TIME_ON_PAGE_AD_IFRAME:g.LOG_OPTIONS_TIME_ON_PAGE;e.Knotch.bugsnag.pushBreadCrumb({name:"adding time on page timer ".concat(this.inAdIframe?"ad unit":"")}),n.logTimeOnPage=new c.default({logOptions:o,timer:this.timeOnPageTimer,event:"time_on_page",tracker:this,id:t}),n.logTimeOnPage._startPolling()}},hideIframe:function(t){e.Knotch.units[t].DOMHandler.fadeOut();var n=this.units[t].videoTracker;this.thirdPartyEvent({knotchId:t,name:"unit_hidden"}),void 0!==n&&"function"==typeof n.handler.dismiss&&n.handler.dismiss()},record:function(t){if(!t)return e.Knotch.bugsnag.reportError(new Error("missing data object"));var n=t.survey_id;if(!this.demo&&!this.units[n].disabled){var i=this.timeOnPageTimer.getTimeOnCurrentPage().timeSpent,r=t.type;this.reporter.sendUnitEvent({data:t,surveyId:n,timer:i}),"survey_response"===r?this.unitResponse(t):"click_through_response"===r?this.units[n].GAFrameTracker.postRBTGA(t):"followup_response"===r&&h.default.set("followup:".concat(n),1,604800)}},unitResponse:function(t){var n=this,i=t.survey_id;void 0!==this.units[i].videoTracker&&e.setTimeout(function(){n.hideIframe(i),n.thirdPartyEvent({knotchId:i,name:"unit_hidden"})},b),this.setKnotchedCookie(t),this.units[i].GAFrameTracker.postGA(t),this.thirdPartyEvent({knotchId:i,name:"unit_response"})},setKnotchedCookie:function(t){var n="knotched:".concat(t.survey_id),i=h.default.get("optout"),r=h.default.get(n);e.Knotch.bugsnag.pushBreadCrumb({name:"Setting knotched cookie",metaData:t}),r&&!Number.isNaN(r)||i||h.default.set(n,t.sentiment,604800)},addUnit:function(t){var n=this,i=t.public_id;this.units[i]={data:t},e.Knotch.bugsnag.pushBreadCrumb({name:"Adding unit to the Tracker",metaData:{id:i}}),this.demo||(this.initTimeOnPage(i),this.reporter.initUnit(t),this.units[i].GAFrameTracker=new y.default({knotchId:i,debug:this.debug,accountId:t.organizationId}),this.record({type:"content_view",survey_id:i}),t.surveyless||this.viewability.addUnit(i),this.inIframe||this.inKnotchPage||this.scrollDepth.addUnit(i),this.inAdIframe&&(this.scrolledPastTracker=new v.default(function(){return n.disableUnit(i)}))),null!==t.videoType&&(this.units[i].videoTracker=new p.default(t,this),this.units[i].isVideo=!0)},removeUnit:function(t){var n=this.units[t];n&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Removing unit from tracker",metaData:{id:t}}),n.isVideo&&(this.units[t].videoTracker.disabled=!0),this.units[t].GAFrameTracker.remove(),delete this.units[t],n.logTimeOnPage&&(n.logTimeOnPage._stopPolling(),n.logTimeOnPage.removeListeners()),this.scrollDepth&&this.scrollDepth.removeUnit(t),this.scrolledPastTracker&&(this.scrolledPastTracker=null),this.viewability&&this.viewability.removeUnit(t))},enableUnit:function(t){var n=this.units[t];n&&n.disabled&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Enabling unit in tracker",metaData:{id:t}}),n.disabled=!1,n.logTimeOnPage&&n.logTimeOnPage._startPolling(),n.isVideo&&(this.units[t].videoTracker.disabled=!1))},disableUnit:function(t){var n=this.units[t];n&&(n.isVideo&&(this.units[t].videoTracker.disabled=!0),n.disabled||(e.Knotch.bugsnag.pushBreadCrumb({name:"Disabling unit in tracker",metaData:{id:t}}),n.disabled=!0,n.logTimeOnPage&&n.logTimeOnPage._stopPolling()))}};var T=s;i.default=T},{"../helpers/Cookies":13,"../helpers/vanillaHelper":15,"./ReporterHandler":18,"./timers/SophistiTimer":22,"./timers/TimerLogger":23,"./timers/constants.js":24,"./trackers/GAFrameTracker":26,"./trackers/ScrollDepthTracker":27,"./trackers/ScrolledPastTracker":28,"./trackers/VideoTracker.js":29,"./trackers/ViewabilityTracker":30}],26:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=t("../../../../tmp/config"),c=r(t("../../helpers/vanillaHelper")),d=function(){function t(e){o(this,t),this.iframe=this.setupIFrame(e)}return s(t,[{key:"setupIFrame",value:function(t){var n=t.knotchId,i=t.debug,r=t.accountId,o=document.createElement("iframe");return o.name="GAFrame_".concat(n),o.title="Knotch Analytics Frame",o.setAttribute("aria-hidden","true"),o.style.width="0",o.style.height="0",o.style.display="none",o.id="GAFrame_".concat(n),o.frameBorder="0",o.src="".concat(u.knotchConfig.gaframe,"?id=").concat(n,"&product_type=measurement&account_id=").concat(r),i&&(o.src+="&debug=true"),c.default.ready(function(){return document.body.appendChild(o)}),e.Knotch.bugsnag.pushBreadCrumb({name:"Added GAFrame",metaData:{id:n}}),o}},{key:"postGA",value:function(t){if(t.eventType="response",e.Knotch.bugsnag.pushBreadCrumb({name:"posting knotch response to GAFrame",metaData:t}),!t||isNaN(t.sentiment)){var n=new Error("Missing Google Analytics Sentiment data");return e.Knotch.bugsnag.reportError(n,t)}this.iframe?this.iframe.contentWindow.postMessage(t,"*"):e.Knotch.bugsnag.pushBreadCrumb({name:"Missing iframe",metaData:{id:t.survey_id}})}},{key:"postRBTGA",value:function(t){return t.eventType="RBT",e.Knotch.bugsnag.pushBreadCrumb({name:"Posting RBT to GAFrame",metaData:t}),t.type?void(this.iframe?this.iframe.contentWindow.postMessage(t,"*"):e.Knotch.bugsnag.pushBreadCrumb({name:"Missing iframe",metaData:{id:t.survey_id}})):e.Knotch.bugsnag.reportError(new Error("Missing Google Analytics RBT data"),t)}},{key:"remove",value:function(){c.default.removeNode(this.iframe)}}]),t}(),l=d;i.default=l},{"../../../../tmp/config":42,"../../helpers/vanillaHelper":15}],27:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c=function(){function t(e){var n=this,i=e.tracker,r=e.selector;o(this,t),this.tracker=i,this.node=this.getTrackedNode(r),this.surveyIds=[],this.scrollTimeout=null,this.touchEndListener=this.onScroll.bind(this),this.scrollListener=this.onScroll.bind(this),this.keyDownListener=this.onKeyDown.bind(this),this.node&&(this.yPosMax=this.getYPos(),u.default.ready(function(){u.default.isMobile()?document.addEventListener("touchend",n.touchEndListener):(document.addEventListener("scroll",n.scrollListener),document.addEventListener("keydown",n.keyDownListener))}))}return s(t,[{key:"getTrackedNode",value:function(t){return t?document.querySelector(t)?document.querySelector(t):e.Knotch.bugsnag.pushBreadCrumb({name:"Node unavailable for scroll depth tracking"}):document.documentElement?document.documentElement:e.Knotch.bugsnag.pushBreadCrumb({name:"Node unavailable for scroll depth tracking"})}},{key:"onScroll",value:function(){var e=this;this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.hasReachedBottomOfContent()?(this.trackScrollDepth(),document.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("touchend",this.touchEndListener)):this.scrollTimeout=setTimeout(function(){return e.trackScrollDepth()},500)}},{key:"onKeyDown",value:function(e){var t=(e.code||"").toLowerCase();"space"!==t&&"arrowdown"!==t||this.onScroll()}},{key:"trackScrollDepth",value:function(){var e=this,t=this.getYPos()<=this.yPosMax;t||(this.yPosMax=this.getYPos(),this.surveyIds.length&&this.surveyIds.forEach(function(t){return e.track(t)}))}},{key:"getYPos",value:function(){return e.scrollY+e.innerHeight}},{key:"track",value:function(t){return"number"!=typeof this.yPosMax||isNaN(this.yPosMax)?e.Knotch.bugsnag.reportError(new Error("invalid scrolldepth yPosMax"),{data:{yPosMax:this.yPosMax}}):void this.tracker.record({type:"scroll_depth",scroll_position:this.yPosMax,survey_id:t})}},{key:"addUnit",value:function(e){this.surveyIds.push(e),this.track(e)}},{key:"removeUnit",value:function(e){var t=this.surveyIds.indexOf(e);this.surveyIds.splice(t,1)}},{key:"hasReachedBottomOfContent",value:function(){return!!this.node&&(this.yPosMax&&this.yPosMax>=this.node.scrollHeight)}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper":15}],28:[function(t,n,i){"use strict";function r(e){this.callback=e,this.inView=!1,this.hasViewed=!1,this.intObs=null,this.checks=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={init:function(){"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype&&(this.intervalCheck=e.setInterval(this.addObs.bind(this),100))},addObs:function(){var e=this;document.body&&(this.intObs&&this.intObs.unobserve(document.body),this.intObs=new IntersectionObserver(function(t){return e.checkViewability(t[0])},{threshold:.5}),this.intObs.observe(document.body))},isInView:function(){return this.inView},stop:function(){clearInterval(this.intervalCheck)},checkViewability:function(t){var n=t.intersectionRatio>=.1;try{if(n instanceof Error)this.stop();else{if(this.checks.push(n),this.checks.length>10&&this.checks.shift(),10===this.checks.length){for(var i=!0,r=0;r<10;r++)i=i&&this.checks[r];this.viewed=i}this.viewed?this.hasViewed=!0:!this.viewed&&this.hasViewed&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Unit has been scrolled past"}),this.intObs.unobserve(document.body),this.callback(),this.stop())}}catch(t){e.Knotch.bugsnag.reportError(t)}}};var o=r;i.default=o},{}],29:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(t,n){this.unit=t,this.finished=!1,this.knotched=null!==b.default.get("knotched:".concat(t.public_id)),this.duration=null,this.tracker=n,this.vidTimer=new g.default("time_playing_video",y.LOG_OPTIONS_TIME_PLAYING_VIDEO),this.videoType=t.videoType,this.disabled=!1,this.init();var i=T[this.videoType];if(!i){var r=new Error("There is no video handler available for this video type: ".concat(t.videoType));return e.Knotch.bugsnag.reportError(r)}this.handler=new i(this,{url:t.videoUrl,surveyId:t.public_id})}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../video/BrightcoveHandler.js")),s=r(t("../video/FAVEHandler.js")),u=r(t("../video/HTML5VidHandler.js")),c=r(t("../video/JWPlayerHandler.js")),d=r(t("../video/SMPlayerHandler.js")),l=r(t("../video/KalturaHandler.js")),h=r(t("../video/VimeoHandler.js")),f=r(t("../video/VPAIDHandler.js")),p=r(t("../video/WistiaHandler.js")),m=r(t("../video/YoutubeHandler.js")),v=r(t("../timers/TimerLogger.js")),g=r(t("../timers/SophistiTimer.js")),y=t("../timers/constants.js"),b=r(t("../../helpers/Cookies.js")),T={0:a.default,1:m.default,2:h.default,5:u.default,6:l.default,7:c.default,8:f.default,9:p.default,10:s.default,11:d.default};o.prototype.init=function(){if(!this.disabled){this.vidTimer.init();var e=y.LOG_OPTIONS_TIME_PLAYING_VIDEO;this.logVideoTimer||(this.logVideoTimer=new v.default({timer:this.vidTimer,event:"time_playing_video",tracker:this.tracker,id:this.unit.public_id,logOptions:e}))}},o.prototype.play=function(){this.disabled||this.logVideoTimer.started||this.finished||this.logVideoTimer.startTimer()},o.prototype.pause=function(){this.disabled||this.finished||this.logVideoTimer.stopTimer()},o.prototype.finish=function(){var t=this.unit.public_id;if(this.knotched=null!==b.default.get("knotched:".concat(t)),e.Knotch.bugsnag.pushBreadCrumb({name:"video finished, knotched: ".concat(this.knotched,", finished: ").concat(this.finished,", disabled: ").concat(this.disabled)}),!this.disabled){if(!this.finished){this.logVideoTimer.stopTimer();var n={survey_id:t,type:"video_completed"};this.duration&&this.duration>0&&(n.video_duration=this.duration),e.Knotch.bugsnag.pushBreadCrumb({name:"recording video completed"}),this.tracker.record(n)}this.knotched||this.unit.surveyless?e.Knotch.bugsnag.pushBreadCrumb({name:"not fading in survey because already knotched or unit is surveyless",type:"ui"}):(e.Knotch.bugsnag.pushBreadCrumb({name:"fading in survey",type:"ui"}),e.Knotch.units[t].DOMHandler.fadeIn(),this.tracker.thirdPartyEvent({knotchId:t,name:"unit_shown"})),this.tracker.thirdPartyEvent({knotchId:t,name:"video_finished",unitHidden:this.knotched}),this.finished=!0}},o.prototype.setMaxTime=function(t){if(!this.disabled){if(t<1e3){var n=new Error("Improperly set maxTime: ".concat(t,"ms for videoType ").concat(this.videoType));return e.Knotch.bugsnag.reportError(n)}if(!this.logVideoTimer){var i=new Error("LogVideoTimer is undefined");return e.Knotch.bugsnag.reportError(i)}e.Knotch.bugsnag.pushBreadCrumb({name:"Setting max time to ".concat(t,"ms for videoType ").concat(this.videoType)}),this.logVideoTimer.setMaxDuration(t)}};var k=o;i.default=k},{"../../helpers/Cookies.js":13,"../timers/SophistiTimer.js":22,"../timers/TimerLogger.js":23,"../timers/constants.js":24,"../video/BrightcoveHandler.js":31,"../video/FAVEHandler.js":32,"../video/HTML5VidHandler.js":33,"../video/JWPlayerHandler.js":34,"../video/KalturaHandler.js":35,"../video/SMPlayerHandler.js":36,"../video/VPAIDHandler.js":37,"../video/VimeoHandler.js":38,"../video/WistiaHandler.js":39,"../video/YoutubeHandler.js":40}],30:[function(t,n,i){"use strict";function r(t){this.ids=[],this.tracker=t,this.checks={},this.viewed={},this.intervalCheck=e.setInterval(this.check.bind(this),100)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={check:function(){for(var t=e.innerHeight,n=0;n<this.ids.length;n++){var i=this.ids[n],r=document.getElementById("knotchframe_".concat(i));if(r){this.checks[i]||(this.checks[i]=[]),this.checks[i].length>10&&this.checks[i].shift();var o=document.getElementById("knotchframe_".concat(i)).getBoundingClientRect(),a=o.top+.5*o.height,s=a>0&&a<t;this.checks[i].push(s),this.isViewed(i)}else this.ids.splice(n,1)}},isViewed:function(t){for(var n=!0,i=0;i<10;i++)n=n&&this.checks[t][i];if(this.viewed[t]=n,this.viewed[t]){this.tracker.record({type:"viewability",survey_id:t,viewed:!0,viewability_type:"jstag"});var r=this.ids.indexOf(t);this.ids.splice(r,1),this.ids.length||e.clearInterval(this.intervalCheck)}},addUnit:function(t){this.ids.push(t),this.tracker.record({type:"viewability",survey_id:t,viewed:!1,viewability_type:"jstag"}),this.intervalCheck||(this.intervalCheck=e.setInterval(this.check.bind(this),100))},get:function(e){return!!this.viewed[e]},removeUnit:function(e){var t=this.ids.indexOf(e);t!==-1&&this.ids.splice(t,1)}};var o=r;i.default=o},{}],31:[function(t,n,i){"use strict";function r(e,t){this.videoTracker=e,this.surveyId=t.surveyId,this.node=document.querySelector('[data-knotch="'.concat(this.surveyId,'"]')),this.loadAPI(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={interceptEvents:function(){var e=this,t=this.videoTracker;if(this.player.on("loadedmetadata",function(){e.autoplay&&t.play()}),this.player.on("ended",function(){return t.finish()}),this.player.on("play",function(){return t.play()}),this.player.on("pause",function(){return t.pause()}),this.node.duration){var n=Math.floor(1e3*this.node.duration);this.videoTracker.duration=n,this.videoTracker.setMaxTime(n)}},loadAPI:function(){e.videojs?this.init():this.injectBrightcove()},injectBrightcove:function(){var e=this,t=document.createElement("script"),n=this.videoProperties,i=n.accountId,r=n.playerId,o=n.videoId;t.src="//players.brightcove.net/".concat(i,"/").concat(r,"_default/index.js");var a=document.querySelector('script[src="../dist/knotch.js"]');a.parentNode.insertBefore(t,a);var s=document.getElementById("knotchVideo"),u=document.createElement("video");u.setAttribute("data-video-id",o),u.setAttribute("data-account",i),u.setAttribute("data-player",r),u.setAttribute("data-embed","default"),u.setAttribute("class","video-js"),u.setAttribute("data-application-id",""),u.setAttribute("controls",""),u.style.width="100%",u.style.height="100%",s.append(u),this.node=u,t.onload=function(){return e.init()}},init:function(){this.node?(this.player=e.videojs(this.node),this.autoplay=this.player.autoplay(),this.interceptEvents()):e.Knotch.bugsnag.pushBreadCrumb({name:"Brightcove video player node is missing"})},getVideoProperties:function(){var t=this.url.match(/(?:https?:\/\/)?(?:www\.)?players.brightcove.net\/(\d+)\/(\w+)\/?index.html\?videoId=(\d+)/);return t?{accountId:t[1],playerId:t[2].split("_")[0],videoId:t[3]}:void e.Knotch.bugsnag.pushBreadCrumb({name:"URL does not provide necessary IDs"})}};var o=r;i.default=o},{}],32:[function(t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function t(e,n){r(this,t),this.videoTracker=e,this.surveyId=n.surveyId,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.init()}return a(t,[{key:"init",value:function(){var t=this,n=setInterval(function(){var i=e.FAVE&&Object.keys(e.FAVE.player.instances).length>0;return i?(t.playerId=document.querySelector("div[data-knotch]").id,e.Knotch.bugsnag.pushBreadCrumb({name:"FAVE player found",type:"ui"}),t.interceptEvents(),void clearInterval(n)):e.Knotch.bugsnag.pushBreadCrumb({name:"FAVE player not found",type:"ui"})},500);e.setTimeout(function(){(!e.FAVE||Object.keys(e.FAVE.player.instances).length<=0)&&e.Knotch.bugsnag.reportError(new Error("FAVE player not found within one minute")),clearInterval(n)},6e4)}},{key:"interceptEvents",value:function(){var t=this,n=this.videoTracker,i=e.FAVE.player.instances,r=i[this.playerId].getPlayer();r.addEventListener("playing",function(){n.play()}),r.addEventListener("pause",function(){n.pause()}),r.addEventListener("ended",function(){n.finished||n.finish()}),r.addEventListener("timeupdate",function(){var i=r.currentTime;!t.videoTracker.logVideoTimer.started&&i>0&&t.videoTracker.play(),i>=r.duration-2&&!n.finished&&(r.pause(),n.finish(),t.timeoutUnit||(t.timeoutUnit=e.setTimeout(function(){e.Knotch.tracker.hideIframe(n.unit.public_id),r.play()},1e4)))})}}]),t}(),u=s;i.default=u},{}],33:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(t,n){this.videoTracker=t,this.DOMHandler=e.Knotch.units[n.surveyId].DOMHandler,this.options=n,this.node=document.querySelector('video[data-knotch="'.concat(n.surveyId,'"]')),this.looped=this.isLooping(),this.interceptEvents()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper")),s=1e4;o.prototype={interceptEvents:function(){var e=this,t=this.videoTracker;a.default.onEvent("loadedmetadata",this.node,function(){e.autoplay&&t.play()}),a.default.onEvent("timeupdate",this.node,function(t){return e.progressHandler(t)}),a.default.onEvent("play",this.node,function(){return t.play()}),a.default.onEvent("pause",this.node,function(){return t.pause()}),this.looped?(this.DOMHandler.onIframeEvent("mouseenter",function(){clearTimeout(e.backToLoopTimeOut),e.backToLoopTimeOut=null}),this.DOMHandler.onIframeEvent("mouseleave",function(){e.videoTracker.finished&&(e.backToLoopTimeOut=setTimeout(function(){return e.backToLoop()},s))})):a.default.onEvent("ended",this.node,function(){return t.finish()})},progressHandler:function(){var t=this;if(this.videoTracker.play(),!this.videoTracker.knotched){if(this.node.duration&&!this.videoTracker.duration){var n=Math.floor(1e3*this.node.duration);this.videoTracker.duration=n,this.videoTracker.setMaxTime(n)}this.videoTracker.logVideoTimer||this.videoTracker.init();var i=this.node,r=i.currentTime,o=i.duration;if(Number.isNaN(r)||Number.isNaN(o))return void e.Knotch.bugsnag.pushBreadCrumb({name:"HTML5 video not ready yet",surveyId:this.options.surveyId,currentTime:r,duration:o});var a=r>o-.5;this.looped&&a&&!this.backToLoopTimeOut?(this.node.pause(),this.videoTracker.finish(),this.backToLoopTimeOut=setTimeout(function(){return t.backToLoop()},s)):!a&&this.backToLoopTimeOut&&(clearTimeout(this.backToLoopTimeOut),this.backToLoopTimeOut=null)}},backToLoop:function(){var e=this;setTimeout(function(){return e.DOMHandler.fadeOut()},500),this.node.play(),clearTimeout(this.backToLoopTimeOut),this.backToLoopTimeOut=null},isLooping:function(){return this.node?this.node._isLooping?this.node._isLooping:this.node.loop:e.Knotch.bugsnag.reportError(new Error("HTML5 video missing"))},dismiss:function(){this.looped&&this.backToLoop()}};var u=o;i.default=u},{"../../helpers/vanillaHelper":15}],34:[function(t,n,i){"use strict";function r(e,t){this.videoTracker=e,this.node=document.querySelector('video[data-knotch="'.concat(t.surveyId,'"]')),this.interceptEvents()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={interceptEvents:function(){var t=this,n=this.videoTracker,i=e.jwplayer&&e.jwplayer();if(i){var r=i.getDuration();if(r){var o=Math.floor(1e3*r);this.videoTracker.duration=o,this.videoTracker.setMaxTime(o)}var a=i.getState();"playing"===a&&n.play(),i.on("playAttempt",function(){n.play()}),i.on("complete",function(){n.finished||n.finish()}),i.on("play",function(){n.play()}),i.on("pause",function(){n.pause()}),i.on("time",function(){i.getCurrentTime()<=i.getDuration()-2||n.finished||(i.pause(),n.finish(),t.timeoutUnit||(t.timeoutUnit=e.setTimeout(function(){e.Knotch.tracker.hideIframe(n.unit.public_id),i.play()},1e4)))})}}};var o=r;i.default=o},{}],35:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.node=document.querySelector('[data-knotch="'.concat(t.surveyId,'"]')),this.videoTracker=e,this.init(),this.initialized=!1,this.timeoutUnit=null,this.duration=null}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper"));o.prototype={init:function(){var t=this,n=setInterval(function(){e.kWidget&&(clearInterval(n),e.kWidget.addReadyCallback(function(e){return t.bindEvents(e)}))},500);e.setTimeout(function(){return clearInterval(n)},6e4)},bindEvents:function(t){var n=this;if(!this.initialized){this.initialized=!0;var i=document.getElementById(t);i.kBind("playerReady",function(){return n.videoTracker.init()}),i.kBind("playerPlayed",function(){return n.videoTracker.play()}),i.kBind("playerPaused",function(){return n.videoTracker.pause()}),i.kBind("playerPlayEnd",function(){return n.videoTracker.finish()}),i.kBind("playerUpdatePlayhead",function(t){if(!n.duration){n.duration=i.evaluate("{mediaProxy.entry.duration}");var r=Math.floor(1e3*n.duration);n.videoTracker.duration=r,n.videoTracker.setMaxTime(r)}!n.videoTracker.logVideoTimer.started&&t>0&&n.videoTracker.play(),n.duration&&t>n.duration-2&&!n.videoTracker.finished&&(n.videoTracker.finish(),i.sendNotification("doPause"),n.timeoutUnit||(n.timeoutUnit=e.setTimeout(function(){e.Knotch.tracker.hideIframe({data:{id:n.videoTracker.unit.public_id}}),i.sendNotification("doPlay")},1e4)))}),a.default.listen("message",e,function(t){t.data&&"hideIframe"===t.data.eventType&&(e.clearTimeout(n.timeoutUnit),i.sendNotification("doPlay"))})}}};var s=o;i.default=s},{"../../helpers/vanillaHelper":15}],36:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c="https://api.sele.co",d=function(){function t(e,n){o(this,t),this.videoTracker=e,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.waitForAPI()}return s(t,[{key:"waitForAPI",value:function(){var t=this,n=setInterval(function(){var i=e.SM;i&&(clearInterval(n),t.init(),t.videoTracker.init())},500);e.setTimeout(function(){return clearInterval(n),e.Knotch.bugsnag.reportError(new Error("SM API not found"))},6e4)}},{key:"init",value:function(){var t=document.querySelector(".sm-iframe");if(!t)return e.Knotch.bugsnag.pushBreadCrumb({name:"sm iframe not found",type:"video_integration"});var n=t.getAttribute("src");u.default.stringContains(n,"autoStart=true")?(e.Knotch.bugsnag.pushBreadCrumb({name:"autoplaying sm player",type:"video_integration"}),this.videoTracker.play()):e.Knotch.bugsnag.pushBreadCrumb({name:"sm player either not autoplay, or invalid search strings",type:"video_integration"}),this.interceptEvents()}},{key:"interceptEvents",value:function(){var t=this.videoTracker;u.default.listen("message",e,function(n){if(n.origin===c){var i=JSON.parse(n.data);if(!i)return e.Knotch.bugsnag.pushBreadCrumb({name:"no sm player data",type:"video_integration"});switch(i.type){case"play":t.play();break;case"pause":t.pause();break;case"ended":t.finished||t.finish()}}})}}]),t}(),l=d;i.default=l},{"../../helpers/vanillaHelper":15}],37:[function(e,t,n){"use strict";function i(e,t){this.options=t,this.videoTracker=e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,i.prototype={dismiss:function(){console.log("placeholder function")}};var r=i;n.default=r},{}],38:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper.js")),c=function(){function t(e,n){o(this,t),this.videoTracker=e,this.url=n.url,this.surveyId=n.surveyId,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.loadAPI()}return s(t,[{key:"loadAPI",value:function(){var t=this;if("undefined"==typeof e.Vimeo){var n=document.createElement("script");n.src="https://player.vimeo.com/api/player.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),n.onload=function(){t.init()}}else this.init()}},{key:"init",value:function(){var t=this;this.player=new e.Vimeo.Player(this.node,{id:this.getVimeoId(),transparent:!1}),this.player.ready().then(function(){t.bindListeners(),(e.Knotch.inIframe||u.default.inKnotchPage())&&u.default.extend(t.player.element.style,{width:"100%",height:"100%"}),t.player.getDuration().then(function(e){var n=Math.floor(1e3*e);t.videoTracker.duration=n,t.videoTracker.setMaxTime(n)})}).catch(function(t){e.Knotch.bugsnag.reportError(t)})}},{key:"bindListeners",value:function(){var e=this;this.player.on("play",function(){return e.videoTracker.play()}),this.player.on("pause",function(){return e.videoTracker.pause()}),this.player.on("error",function(t){return e.handleError(t)}),this.player.on("ended",function(){return e.videoTracker.finish()})}},{key:"handleError",value:function(t){if(t&&t.name)switch(t.name){case"NotAllowedError":e.Knotch.bugsnag.pushBreadCrumb({name:"error: NotAllowedError occured"});break;case"playInterrupted":e.Knotch.bugsnag.pushBreadCrumb({name:"error: playInterrupted occured"})}else e.Knotch.bugsnag.reportError(new Error("Vimeo integration error"),{data:t})}},{key:"getVimeoId",value:function(){var e=this.url.match(/(?:https?:\/\/)?(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);return e?e[3]||e[1]:null}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper.js":15}],39:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c=function(){function t(e,n){var i=n.surveyId;o(this,t),this.videoTracker=e,this.surveyId=i,this.node=document.querySelector('[data-knotch="'.concat(i,'"]')),this.id=this.extractId(),this.id&&this.waitForAPI(this.id)}return s(t,[{key:"extractId",value:function(){var t="wistia_async_",n=null;try{if("VIDEO"===this.node.tagName){for(var i=this.node;i&&i.className.indexOf(t)===-1;)i=i.parentNode;var r=i.className.split(" "),o=r.filter(function(e){return e.indexOf(t)!==-1});o.length&&o[0].length&&(n=o[0].substring(t.length,o[0].length))}else if("IFRAME"===this.node.tagName){var a=this.node.src;n=a.split("?")[0].split("/")[5]}n||e.Knotch.bugsnag.reportError(new Error("No id found"),{data:event})}catch(t){e.Knotch.bugsnag.reportError(t)}return n}},{key:"waitForAPI",value:function(t){var n=this;e._wq=e._wq||[],e._wq.push({id:t,onReady:function(){n.init()}})}},{key:"init",value:function(){return"VIDEO"===this.node.tagName||(this.node=this.node.querySelector("video"),this.node)?void this.bindListeners():e.Knotch.bugsnag.reportError(new Error("Wistia integration: video element not found"),{data:{pageNode:u.default.getNodeDescription(this.node)}})}},{key:"bindListeners",value:function(){var e=this,t=this.videoTracker;u.default.onEvent("timeupdate",this.node,function(t){return e.progressHandler(t)}),u.default.onEvent("play",this.node,function(){return t.play()}),u.default.onEvent("pause",this.node,function(){return t.pause()}),u.default.onEvent("ended",this.node,function(){return t.finish()})}},{key:"progressHandler",value:function(){if(this.videoTracker.play(),!this.videoTracker.knotched){if(this.node.duration&&!this.videoTracker.duration){var t=Math.floor(1e3*this.node.duration);this.videoTracker.duration=t,this.videoTracker.setMaxTime(t)}this.videoTracker.logVideoTimer||this.videoTracker.init();var n=this.node,i=n.currentTime,r=n.duration;(Number.isNaN(i)||Number.isNaN(r))&&e.Knotch.bugsnag.pushBreadCrumb({name:"wistia video not ready yet",surveyId:this.options.surveyId,currentTime:i,duration:r})}}},{key:"handleError",value:function(t){e.Knotch.bugsnag.reportError(new Error("Wistia integration error"),{data:t})}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper":15}],40:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(t,n){this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.id=this.getIdFromUrl(this.getUrl(n)),this.hasAutoplay="1"===a.default.getQueryParams(this.getUrl(n)).autoplay,this.videoTracker=t,(0,s.default)(e),this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(t("../../helpers/vanillaHelper")),s=r(t("../../thirdparty/YoutubeIframeAPI.js"));o.prototype={init:function(){var t=this;"undefined"==typeof e.YT||"undefined"==typeof e.YT.Player?e.onYouTubePlayerAPIReady=function(){return t.loadAPI()}:this.loadAPI()},getUrl:function(e){return a.default.isTopFrame()?this.node.getAttribute("src"):e.url},getIdFromUrl:function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return e.match(t)?e.match(t)[1]:null},loadAPI:function(){var t=this,n=null;"undefined"!=typeof this.node.id&&0!==this.node.id.length||(this.node.id="knotchVideo_".concat(this.id),e.Knotch.bugsnag.pushBreadCrumb({name:"node ID added"})),n=this.node.id,this.node.src&&this.enableAPI();var i=e.YT.get(n);i?(e.Knotch.bugsnag.pushBreadCrumb({name:"YouTube player exists, listening to events"}),this.player=i,this.player.addEventListener("onReady",function(e){return t.onReady(e)}),this.player.addEventListener("onStateChange",function(e,n){return t.onStateChange(e,n)})):(e.Knotch.bugsnag.pushBreadCrumb({name:"Adding a new YouTube player"}),this.player=new e.YT.Player(n,{height:"100%",width:"100%",videoId:this.id,playerVars:{modestbranding:0,fs:0,rel:0,wmode:"transparent",enablejsapi:1,autoplay:this.hasAutoplay,showinfo:0,loop:1},events:{onStateChange:function(e,n){return t.onStateChange(e,n)},onError:function(e){return t.onError(e)},onReady:function(e){return t.onReady(e)}}}))},enableAPI:function(){this.node.src.indexOf("enablejsapi")===-1&&(this.node.src.indexOf("?")===-1?this.node.src+="?enablejsapi=1":this.node.src+="&enablejsapi=1",e.Knotch.bugsnag.pushBreadCrumb({name:"youtube API enabled"}))},onReady:function(t){var n=t.target.getDuration();if(n){var i=Math.floor(1e3*n);this.videoTracker.duration=i,this.videoTracker.setMaxTime(i),e.Knotch.bugsnag.pushBreadCrumb({name:"Adding YouTube max time and duration to video tracker"})}this.hasAutoplay&&this.videoTracker.play()},onError:function(t){e.Knotch.bugsnag.reportError(new Error("Youtube integration error"),{data:t})},onStateChange:function(t,n){switch(n&&n(),t.data){default:break;case 0:this.videoTracker.finish(),e.Knotch.bugsnag.pushBreadCrumb({name:"YouTube video finished"});break;case 1:this.videoTracker.play(),e.Knotch.bugsnag.pushBreadCrumb({name:"YouTube video played"});break;case 2:this.videoTracker.pause(),e.Knotch.bugsnag.pushBreadCrumb({name:"YouTube video paused"})}}};var u=o;i.default=u},{"../../helpers/vanillaHelper":15,"../../thirdparty/YoutubeIframeAPI.js":41}],41:[function(e,t,n){"use strict";function i(e){e.YT||(e.YT={loading:0,loaded:0}),e.YTConfig||(e.YTConfig={host:"http://www.youtube.com"}),e.YT.loading||(e.YT.loading=1,function(){var t=[];e.YT.ready=function(n){e.YT.loaded?n():t.push(n)},e.onYTReady=function(){e.YT.loaded=1;for(var n=0;n<t.length;n++)try{t[n]()}catch(e){}},e.YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var n=document.createElement("script");n.type="text/javascript",n.id="www-widgetapi-script",n.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfl9cGVgZ/www-widgetapi.js",n.async=!0;var i=document.currentScript;if(i){var r=i.nonce||i.getAttribute("nonce");r&&n.setAttribute("nonce",r)}var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}())}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.knotchConfig=void 0;var i={env:"production",version:"v4.17.2",pixel:"https://c.knotch.it/",root:"https://www.knotch.it",metadata:"https://units.knotch.it/units",gaframe:"https://units.knotch.it/gaframe/ver-966f857/index.html",reporter:"https://units.knotch.it/reporter/ver-b30b9ff/index.html",measurementUnit:"https://www.knotch-cdn.com/unit/latest/measurementUnit.js"};n.knotchConfig=i},{}]},{},[21])}catch(e){Knotch.bugsnag&&Knotch.bugsnag.reportError(e)}}(window);